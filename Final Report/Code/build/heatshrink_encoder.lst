ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 1


   1              		.cpu cortex-m0
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"heatshrink_encoder.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.get_input_buffer_size,"ax",%progbits
  16              		.align	1
  17              		.arch armv6s-m
  18              		.syntax unified
  19              		.code	16
  20              		.thumb_func
  21              		.fpu softvfp
  23              	get_input_buffer_size:
  24              	.LVL0:
  25              	.LFB13:
  26              		.file 1 "Core/Src/heatshrink_encoder.c"
   1:Core/Src/heatshrink_encoder.c **** #include <stdlib.h>
   2:Core/Src/heatshrink_encoder.c **** #include <string.h>
   3:Core/Src/heatshrink_encoder.c **** #include <stdbool.h>
   4:Core/Src/heatshrink_encoder.c **** #include "heatshrink_encoder.h"
   5:Core/Src/heatshrink_encoder.c **** 
   6:Core/Src/heatshrink_encoder.c **** typedef enum {
   7:Core/Src/heatshrink_encoder.c ****     HSES_NOT_FULL,              /* input buffer not full enough */
   8:Core/Src/heatshrink_encoder.c ****     HSES_FILLED,                /* buffer is full */
   9:Core/Src/heatshrink_encoder.c ****     HSES_SEARCH,                /* searching for patterns */
  10:Core/Src/heatshrink_encoder.c ****     HSES_YIELD_TAG_BIT,         /* yield tag bit */
  11:Core/Src/heatshrink_encoder.c ****     HSES_YIELD_LITERAL,         /* emit literal byte */
  12:Core/Src/heatshrink_encoder.c ****     HSES_YIELD_BR_INDEX,        /* yielding backref index */
  13:Core/Src/heatshrink_encoder.c ****     HSES_YIELD_BR_LENGTH,       /* yielding backref length */
  14:Core/Src/heatshrink_encoder.c ****     HSES_SAVE_BACKLOG,          /* copying buffer to backlog */
  15:Core/Src/heatshrink_encoder.c ****     HSES_FLUSH_BITS,            /* flush bit buffer */
  16:Core/Src/heatshrink_encoder.c ****     HSES_DONE,                  /* done */
  17:Core/Src/heatshrink_encoder.c **** } HSE_state;
  18:Core/Src/heatshrink_encoder.c **** 
  19:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_DEBUGGING_LOGS
  20:Core/Src/heatshrink_encoder.c **** #include <stdio.h>
  21:Core/Src/heatshrink_encoder.c **** #include <ctype.h>
  22:Core/Src/heatshrink_encoder.c **** #include <assert.h>
  23:Core/Src/heatshrink_encoder.c **** #define LOG(...) fprintf(stderr, __VA_ARGS__)
  24:Core/Src/heatshrink_encoder.c **** #define ASSERT(X) assert(X)
  25:Core/Src/heatshrink_encoder.c **** static const char *state_names[] = {
  26:Core/Src/heatshrink_encoder.c ****     "not_full",
  27:Core/Src/heatshrink_encoder.c ****     "filled",
  28:Core/Src/heatshrink_encoder.c ****     "search",
  29:Core/Src/heatshrink_encoder.c ****     "yield_tag_bit",
  30:Core/Src/heatshrink_encoder.c ****     "yield_literal",
  31:Core/Src/heatshrink_encoder.c ****     "yield_br_index",
  32:Core/Src/heatshrink_encoder.c ****     "yield_br_length",
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 2


  33:Core/Src/heatshrink_encoder.c ****     "save_backlog",
  34:Core/Src/heatshrink_encoder.c ****     "flush_bits",
  35:Core/Src/heatshrink_encoder.c ****     "done",
  36:Core/Src/heatshrink_encoder.c **** };
  37:Core/Src/heatshrink_encoder.c **** #else
  38:Core/Src/heatshrink_encoder.c **** #define LOG(...) /* no-op */
  39:Core/Src/heatshrink_encoder.c **** #define ASSERT(X) /* no-op */
  40:Core/Src/heatshrink_encoder.c **** #endif
  41:Core/Src/heatshrink_encoder.c **** 
  42:Core/Src/heatshrink_encoder.c **** // Encoder flags
  43:Core/Src/heatshrink_encoder.c **** enum {
  44:Core/Src/heatshrink_encoder.c ****     FLAG_IS_FINISHING = 0x01,
  45:Core/Src/heatshrink_encoder.c **** };
  46:Core/Src/heatshrink_encoder.c **** 
  47:Core/Src/heatshrink_encoder.c **** typedef struct {
  48:Core/Src/heatshrink_encoder.c ****     uint8_t *buf;               /* output buffer */
  49:Core/Src/heatshrink_encoder.c ****     size_t buf_size;            /* buffer size */
  50:Core/Src/heatshrink_encoder.c ****     size_t *output_size;        /* bytes pushed to buffer, so far */
  51:Core/Src/heatshrink_encoder.c **** } output_info;
  52:Core/Src/heatshrink_encoder.c **** 
  53:Core/Src/heatshrink_encoder.c **** #define MATCH_NOT_FOUND ((uint16_t)-1)
  54:Core/Src/heatshrink_encoder.c **** 
  55:Core/Src/heatshrink_encoder.c **** static uint16_t get_input_offset(heatshrink_encoder *hse);
  56:Core/Src/heatshrink_encoder.c **** static uint16_t get_input_buffer_size(heatshrink_encoder *hse);
  57:Core/Src/heatshrink_encoder.c **** static uint16_t get_lookahead_size(heatshrink_encoder *hse);
  58:Core/Src/heatshrink_encoder.c **** static void add_tag_bit(heatshrink_encoder *hse, output_info *oi, uint8_t tag);
  59:Core/Src/heatshrink_encoder.c **** static int can_take_byte(output_info *oi);
  60:Core/Src/heatshrink_encoder.c **** static int is_finishing(heatshrink_encoder *hse);
  61:Core/Src/heatshrink_encoder.c **** static void save_backlog(heatshrink_encoder *hse);
  62:Core/Src/heatshrink_encoder.c **** 
  63:Core/Src/heatshrink_encoder.c **** /* Push COUNT (max 8) bits to the output buffer, which has room. */
  64:Core/Src/heatshrink_encoder.c **** static void push_bits(heatshrink_encoder *hse, uint8_t count, uint8_t bits,
  65:Core/Src/heatshrink_encoder.c ****     output_info *oi);
  66:Core/Src/heatshrink_encoder.c **** static uint8_t push_outgoing_bits(heatshrink_encoder *hse, output_info *oi);
  67:Core/Src/heatshrink_encoder.c **** static void push_literal_byte(heatshrink_encoder *hse, output_info *oi);
  68:Core/Src/heatshrink_encoder.c **** 
  69:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_DYNAMIC_ALLOC
  70:Core/Src/heatshrink_encoder.c **** heatshrink_encoder *heatshrink_encoder_alloc(uint8_t window_sz2,
  71:Core/Src/heatshrink_encoder.c ****         uint8_t lookahead_sz2) {
  72:Core/Src/heatshrink_encoder.c ****     if ((window_sz2 < HEATSHRINK_MIN_WINDOW_BITS) ||
  73:Core/Src/heatshrink_encoder.c ****         (window_sz2 > HEATSHRINK_MAX_WINDOW_BITS) ||
  74:Core/Src/heatshrink_encoder.c ****         (lookahead_sz2 < HEATSHRINK_MIN_LOOKAHEAD_BITS) ||
  75:Core/Src/heatshrink_encoder.c ****         (lookahead_sz2 >= window_sz2)) {
  76:Core/Src/heatshrink_encoder.c ****         return NULL;
  77:Core/Src/heatshrink_encoder.c ****     }
  78:Core/Src/heatshrink_encoder.c ****     
  79:Core/Src/heatshrink_encoder.c ****     /* Note: 2 * the window size is used because the buffer needs to fit
  80:Core/Src/heatshrink_encoder.c ****      * (1 << window_sz2) bytes for the current input, and an additional
  81:Core/Src/heatshrink_encoder.c ****      * (1 << window_sz2) bytes for the previous buffer of input, which
  82:Core/Src/heatshrink_encoder.c ****      * will be scanned for useful backreferences. */
  83:Core/Src/heatshrink_encoder.c ****     size_t buf_sz = (2 << window_sz2);
  84:Core/Src/heatshrink_encoder.c **** 
  85:Core/Src/heatshrink_encoder.c ****     heatshrink_encoder *hse = HEATSHRINK_MALLOC(sizeof(*hse) + buf_sz);
  86:Core/Src/heatshrink_encoder.c ****     if (hse == NULL) { return NULL; }
  87:Core/Src/heatshrink_encoder.c ****     hse->window_sz2 = window_sz2;
  88:Core/Src/heatshrink_encoder.c ****     hse->lookahead_sz2 = lookahead_sz2;
  89:Core/Src/heatshrink_encoder.c ****     heatshrink_encoder_reset(hse);
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 3


  90:Core/Src/heatshrink_encoder.c **** 
  91:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_USE_INDEX
  92:Core/Src/heatshrink_encoder.c ****     size_t index_sz = buf_sz*sizeof(uint16_t);
  93:Core/Src/heatshrink_encoder.c ****     hse->search_index = HEATSHRINK_MALLOC(index_sz + sizeof(struct hs_index));
  94:Core/Src/heatshrink_encoder.c ****     if (hse->search_index == NULL) {
  95:Core/Src/heatshrink_encoder.c ****         HEATSHRINK_FREE(hse, sizeof(*hse) + buf_sz);
  96:Core/Src/heatshrink_encoder.c ****         return NULL;
  97:Core/Src/heatshrink_encoder.c ****     }
  98:Core/Src/heatshrink_encoder.c ****     hse->search_index->size = index_sz;
  99:Core/Src/heatshrink_encoder.c **** #endif
 100:Core/Src/heatshrink_encoder.c **** 
 101:Core/Src/heatshrink_encoder.c ****     LOG("-- allocated encoder with buffer size of %zu (%u byte input size)\n",
 102:Core/Src/heatshrink_encoder.c ****         buf_sz, get_input_buffer_size(hse));
 103:Core/Src/heatshrink_encoder.c ****     return hse;
 104:Core/Src/heatshrink_encoder.c **** }
 105:Core/Src/heatshrink_encoder.c **** 
 106:Core/Src/heatshrink_encoder.c **** void heatshrink_encoder_free(heatshrink_encoder *hse) {
 107:Core/Src/heatshrink_encoder.c ****     size_t buf_sz = (2 << HEATSHRINK_ENCODER_WINDOW_BITS(hse));
 108:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_USE_INDEX
 109:Core/Src/heatshrink_encoder.c ****     size_t index_sz = sizeof(struct hs_index) + hse->search_index->size;
 110:Core/Src/heatshrink_encoder.c ****     HEATSHRINK_FREE(hse->search_index, index_sz);
 111:Core/Src/heatshrink_encoder.c ****     (void)index_sz;
 112:Core/Src/heatshrink_encoder.c **** #endif
 113:Core/Src/heatshrink_encoder.c ****     HEATSHRINK_FREE(hse, sizeof(heatshrink_encoder) + buf_sz);
 114:Core/Src/heatshrink_encoder.c ****     (void)buf_sz;
 115:Core/Src/heatshrink_encoder.c **** }
 116:Core/Src/heatshrink_encoder.c **** #endif
 117:Core/Src/heatshrink_encoder.c **** 
 118:Core/Src/heatshrink_encoder.c **** void heatshrink_encoder_reset(heatshrink_encoder *hse) {
 119:Core/Src/heatshrink_encoder.c ****     size_t buf_sz = (2 << HEATSHRINK_ENCODER_WINDOW_BITS(hse));
 120:Core/Src/heatshrink_encoder.c ****     memset(hse->buffer, 0, buf_sz);
 121:Core/Src/heatshrink_encoder.c ****     hse->input_size = 0;
 122:Core/Src/heatshrink_encoder.c ****     hse->state = HSES_NOT_FULL;
 123:Core/Src/heatshrink_encoder.c ****     hse->match_scan_index = 0;
 124:Core/Src/heatshrink_encoder.c ****     hse->flags = 0;
 125:Core/Src/heatshrink_encoder.c ****     hse->bit_index = 0x80;
 126:Core/Src/heatshrink_encoder.c ****     hse->current_byte = 0x00;
 127:Core/Src/heatshrink_encoder.c ****     hse->match_length = 0;
 128:Core/Src/heatshrink_encoder.c **** 
 129:Core/Src/heatshrink_encoder.c ****     hse->outgoing_bits = 0x0000;
 130:Core/Src/heatshrink_encoder.c ****     hse->outgoing_bits_count = 0;
 131:Core/Src/heatshrink_encoder.c **** 
 132:Core/Src/heatshrink_encoder.c ****     #ifdef LOOP_DETECT
 133:Core/Src/heatshrink_encoder.c ****     hse->loop_detect = (uint32_t)-1;
 134:Core/Src/heatshrink_encoder.c ****     #endif
 135:Core/Src/heatshrink_encoder.c **** }
 136:Core/Src/heatshrink_encoder.c **** 
 137:Core/Src/heatshrink_encoder.c **** HSE_sink_res heatshrink_encoder_sink(heatshrink_encoder *hse,
 138:Core/Src/heatshrink_encoder.c ****         uint8_t *in_buf, size_t size, size_t *input_size) {
 139:Core/Src/heatshrink_encoder.c ****     if ((hse == NULL) || (in_buf == NULL) || (input_size == NULL)) {
 140:Core/Src/heatshrink_encoder.c ****         return HSER_SINK_ERROR_NULL;
 141:Core/Src/heatshrink_encoder.c ****     }
 142:Core/Src/heatshrink_encoder.c **** 
 143:Core/Src/heatshrink_encoder.c ****     /* Sinking more content after saying the content is done, tsk tsk */
 144:Core/Src/heatshrink_encoder.c ****     if (is_finishing(hse)) { return HSER_SINK_ERROR_MISUSE; }
 145:Core/Src/heatshrink_encoder.c **** 
 146:Core/Src/heatshrink_encoder.c ****     /* Sinking more content before processing is done */
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 4


 147:Core/Src/heatshrink_encoder.c ****     if (hse->state != HSES_NOT_FULL) { return HSER_SINK_ERROR_MISUSE; }
 148:Core/Src/heatshrink_encoder.c **** 
 149:Core/Src/heatshrink_encoder.c ****     uint16_t write_offset = get_input_offset(hse) + hse->input_size;
 150:Core/Src/heatshrink_encoder.c ****     uint16_t ibs = get_input_buffer_size(hse);
 151:Core/Src/heatshrink_encoder.c ****     uint16_t rem = ibs - hse->input_size;
 152:Core/Src/heatshrink_encoder.c ****     uint16_t cp_sz = rem < size ? rem : size;
 153:Core/Src/heatshrink_encoder.c **** 
 154:Core/Src/heatshrink_encoder.c ****     memcpy(&hse->buffer[write_offset], in_buf, cp_sz);
 155:Core/Src/heatshrink_encoder.c ****     *input_size = cp_sz;
 156:Core/Src/heatshrink_encoder.c ****     hse->input_size += cp_sz;
 157:Core/Src/heatshrink_encoder.c **** 
 158:Core/Src/heatshrink_encoder.c ****     LOG("-- sunk %u bytes (of %zu) into encoder at %d, input buffer now has %u\n",
 159:Core/Src/heatshrink_encoder.c ****         cp_sz, size, write_offset, hse->input_size);
 160:Core/Src/heatshrink_encoder.c ****     if (cp_sz == rem) {
 161:Core/Src/heatshrink_encoder.c ****         LOG("-- internal buffer is now full\n");
 162:Core/Src/heatshrink_encoder.c ****         hse->state = HSES_FILLED;
 163:Core/Src/heatshrink_encoder.c ****     }
 164:Core/Src/heatshrink_encoder.c **** 
 165:Core/Src/heatshrink_encoder.c ****     return HSER_SINK_OK;
 166:Core/Src/heatshrink_encoder.c **** }
 167:Core/Src/heatshrink_encoder.c **** 
 168:Core/Src/heatshrink_encoder.c **** 
 169:Core/Src/heatshrink_encoder.c **** /***************
 170:Core/Src/heatshrink_encoder.c ****  * Compression *
 171:Core/Src/heatshrink_encoder.c ****  ***************/
 172:Core/Src/heatshrink_encoder.c **** 
 173:Core/Src/heatshrink_encoder.c **** static uint16_t find_longest_match(heatshrink_encoder *hse, uint16_t start,
 174:Core/Src/heatshrink_encoder.c ****     uint16_t end, const uint16_t maxlen, uint16_t *match_length);
 175:Core/Src/heatshrink_encoder.c **** static void do_indexing(heatshrink_encoder *hse);
 176:Core/Src/heatshrink_encoder.c **** 
 177:Core/Src/heatshrink_encoder.c **** static HSE_state st_step_search(heatshrink_encoder *hse);
 178:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_tag_bit(heatshrink_encoder *hse,
 179:Core/Src/heatshrink_encoder.c ****     output_info *oi);
 180:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_literal(heatshrink_encoder *hse,
 181:Core/Src/heatshrink_encoder.c ****     output_info *oi);
 182:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_br_index(heatshrink_encoder *hse,
 183:Core/Src/heatshrink_encoder.c ****     output_info *oi);
 184:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_br_length(heatshrink_encoder *hse,
 185:Core/Src/heatshrink_encoder.c ****     output_info *oi);
 186:Core/Src/heatshrink_encoder.c **** static HSE_state st_save_backlog(heatshrink_encoder *hse);
 187:Core/Src/heatshrink_encoder.c **** static HSE_state st_flush_bit_buffer(heatshrink_encoder *hse,
 188:Core/Src/heatshrink_encoder.c ****     output_info *oi);
 189:Core/Src/heatshrink_encoder.c **** 
 190:Core/Src/heatshrink_encoder.c **** HSE_poll_res heatshrink_encoder_poll(heatshrink_encoder *hse,
 191:Core/Src/heatshrink_encoder.c ****         uint8_t *out_buf, size_t out_buf_size, size_t *output_size) {
 192:Core/Src/heatshrink_encoder.c ****     if ((hse == NULL) || (out_buf == NULL) || (output_size == NULL)) {
 193:Core/Src/heatshrink_encoder.c ****         return HSER_POLL_ERROR_NULL;
 194:Core/Src/heatshrink_encoder.c ****     }
 195:Core/Src/heatshrink_encoder.c ****     if (out_buf_size == 0) {
 196:Core/Src/heatshrink_encoder.c ****         LOG("-- MISUSE: output buffer size is 0\n");
 197:Core/Src/heatshrink_encoder.c ****         return HSER_POLL_ERROR_MISUSE;
 198:Core/Src/heatshrink_encoder.c ****     }
 199:Core/Src/heatshrink_encoder.c ****     *output_size = 0;
 200:Core/Src/heatshrink_encoder.c **** 
 201:Core/Src/heatshrink_encoder.c ****     output_info oi;
 202:Core/Src/heatshrink_encoder.c ****     oi.buf = out_buf;
 203:Core/Src/heatshrink_encoder.c ****     oi.buf_size = out_buf_size;
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 5


 204:Core/Src/heatshrink_encoder.c ****     oi.output_size = output_size;
 205:Core/Src/heatshrink_encoder.c **** 
 206:Core/Src/heatshrink_encoder.c ****     while (1) {
 207:Core/Src/heatshrink_encoder.c ****         LOG("-- polling, state %u (%s), flags 0x%02x\n",
 208:Core/Src/heatshrink_encoder.c ****             hse->state, state_names[hse->state], hse->flags);
 209:Core/Src/heatshrink_encoder.c **** 
 210:Core/Src/heatshrink_encoder.c ****         uint8_t in_state = hse->state;
 211:Core/Src/heatshrink_encoder.c ****         switch (in_state) {
 212:Core/Src/heatshrink_encoder.c ****         case HSES_NOT_FULL:
 213:Core/Src/heatshrink_encoder.c ****             return HSER_POLL_EMPTY;
 214:Core/Src/heatshrink_encoder.c ****         case HSES_FILLED:
 215:Core/Src/heatshrink_encoder.c ****             do_indexing(hse);
 216:Core/Src/heatshrink_encoder.c ****             hse->state = HSES_SEARCH;
 217:Core/Src/heatshrink_encoder.c ****             break;
 218:Core/Src/heatshrink_encoder.c ****         case HSES_SEARCH:
 219:Core/Src/heatshrink_encoder.c ****             hse->state = st_step_search(hse);
 220:Core/Src/heatshrink_encoder.c ****             break;
 221:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_TAG_BIT:
 222:Core/Src/heatshrink_encoder.c ****             hse->state = st_yield_tag_bit(hse, &oi);
 223:Core/Src/heatshrink_encoder.c ****             break;
 224:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_LITERAL:
 225:Core/Src/heatshrink_encoder.c ****             hse->state = st_yield_literal(hse, &oi);
 226:Core/Src/heatshrink_encoder.c ****             break;
 227:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_BR_INDEX:
 228:Core/Src/heatshrink_encoder.c ****             hse->state = st_yield_br_index(hse, &oi);
 229:Core/Src/heatshrink_encoder.c ****             break;
 230:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_BR_LENGTH:
 231:Core/Src/heatshrink_encoder.c ****             hse->state = st_yield_br_length(hse, &oi);
 232:Core/Src/heatshrink_encoder.c ****             break;
 233:Core/Src/heatshrink_encoder.c ****         case HSES_SAVE_BACKLOG:
 234:Core/Src/heatshrink_encoder.c ****             hse->state = st_save_backlog(hse);
 235:Core/Src/heatshrink_encoder.c ****             break;
 236:Core/Src/heatshrink_encoder.c ****         case HSES_FLUSH_BITS:
 237:Core/Src/heatshrink_encoder.c ****             hse->state = st_flush_bit_buffer(hse, &oi);
 238:Core/Src/heatshrink_encoder.c ****         case HSES_DONE:
 239:Core/Src/heatshrink_encoder.c ****             return HSER_POLL_EMPTY;
 240:Core/Src/heatshrink_encoder.c ****         default:
 241:Core/Src/heatshrink_encoder.c ****             LOG("-- bad state %s\n", state_names[hse->state]);
 242:Core/Src/heatshrink_encoder.c ****             return HSER_POLL_ERROR_MISUSE;
 243:Core/Src/heatshrink_encoder.c ****         }
 244:Core/Src/heatshrink_encoder.c **** 
 245:Core/Src/heatshrink_encoder.c ****         if (hse->state == in_state) {
 246:Core/Src/heatshrink_encoder.c ****             /* Check if output buffer is exhausted. */
 247:Core/Src/heatshrink_encoder.c ****             if (*output_size == out_buf_size) return HSER_POLL_MORE;
 248:Core/Src/heatshrink_encoder.c ****         }
 249:Core/Src/heatshrink_encoder.c ****     }
 250:Core/Src/heatshrink_encoder.c **** }
 251:Core/Src/heatshrink_encoder.c **** 
 252:Core/Src/heatshrink_encoder.c **** HSE_finish_res heatshrink_encoder_finish(heatshrink_encoder *hse) {
 253:Core/Src/heatshrink_encoder.c ****     if (hse == NULL) { return HSER_FINISH_ERROR_NULL; }
 254:Core/Src/heatshrink_encoder.c ****     LOG("-- setting is_finishing flag\n");
 255:Core/Src/heatshrink_encoder.c ****     hse->flags |= FLAG_IS_FINISHING;
 256:Core/Src/heatshrink_encoder.c ****     if (hse->state == HSES_NOT_FULL) { hse->state = HSES_FILLED; }
 257:Core/Src/heatshrink_encoder.c ****     return hse->state == HSES_DONE ? HSER_FINISH_DONE : HSER_FINISH_MORE;
 258:Core/Src/heatshrink_encoder.c **** }
 259:Core/Src/heatshrink_encoder.c **** 
 260:Core/Src/heatshrink_encoder.c **** static HSE_state st_step_search(heatshrink_encoder *hse) {
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 6


 261:Core/Src/heatshrink_encoder.c ****     uint16_t window_length = get_input_buffer_size(hse);
 262:Core/Src/heatshrink_encoder.c ****     uint16_t lookahead_sz = get_lookahead_size(hse);
 263:Core/Src/heatshrink_encoder.c ****     uint16_t msi = hse->match_scan_index;
 264:Core/Src/heatshrink_encoder.c ****     LOG("## step_search, scan @ +%d (%d/%d), input size %d\n",
 265:Core/Src/heatshrink_encoder.c ****         msi, hse->input_size + msi, 2*window_length, hse->input_size);
 266:Core/Src/heatshrink_encoder.c **** 
 267:Core/Src/heatshrink_encoder.c ****     bool fin = is_finishing(hse);
 268:Core/Src/heatshrink_encoder.c ****     if (msi > hse->input_size - (fin ? 1 : lookahead_sz)) {
 269:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 270:Core/Src/heatshrink_encoder.c ****          * backlog and await more input. */
 271:Core/Src/heatshrink_encoder.c ****         LOG("-- end of search @ %d\n", msi);
 272:Core/Src/heatshrink_encoder.c ****         return fin ? HSES_FLUSH_BITS : HSES_SAVE_BACKLOG;
 273:Core/Src/heatshrink_encoder.c ****     }
 274:Core/Src/heatshrink_encoder.c **** 
 275:Core/Src/heatshrink_encoder.c ****     uint16_t input_offset = get_input_offset(hse);
 276:Core/Src/heatshrink_encoder.c ****     uint16_t end = input_offset + msi;
 277:Core/Src/heatshrink_encoder.c ****     uint16_t start = end - window_length;
 278:Core/Src/heatshrink_encoder.c **** 
 279:Core/Src/heatshrink_encoder.c ****     uint16_t max_possible = lookahead_sz;
 280:Core/Src/heatshrink_encoder.c ****     if (hse->input_size - msi < lookahead_sz) {
 281:Core/Src/heatshrink_encoder.c ****         max_possible = hse->input_size - msi;
 282:Core/Src/heatshrink_encoder.c ****     }
 283:Core/Src/heatshrink_encoder.c ****     
 284:Core/Src/heatshrink_encoder.c ****     uint16_t match_length = 0;
 285:Core/Src/heatshrink_encoder.c ****     uint16_t match_pos = find_longest_match(hse,
 286:Core/Src/heatshrink_encoder.c ****         start, end, max_possible, &match_length);
 287:Core/Src/heatshrink_encoder.c ****     
 288:Core/Src/heatshrink_encoder.c ****     if (match_pos == MATCH_NOT_FOUND) {
 289:Core/Src/heatshrink_encoder.c ****         LOG("ss Match not found\n");
 290:Core/Src/heatshrink_encoder.c ****         hse->match_scan_index++;
 291:Core/Src/heatshrink_encoder.c ****         hse->match_length = 0;
 292:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_TAG_BIT;
 293:Core/Src/heatshrink_encoder.c ****     } else {
 294:Core/Src/heatshrink_encoder.c ****         LOG("ss Found match of %d bytes at %d\n", match_length, match_pos);
 295:Core/Src/heatshrink_encoder.c ****         hse->match_pos = match_pos;
 296:Core/Src/heatshrink_encoder.c ****         hse->match_length = match_length;
 297:Core/Src/heatshrink_encoder.c ****         ASSERT(match_pos <= 1 << HEATSHRINK_ENCODER_WINDOW_BITS(hse) /*window_length*/);
 298:Core/Src/heatshrink_encoder.c **** 
 299:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_TAG_BIT;
 300:Core/Src/heatshrink_encoder.c ****     }
 301:Core/Src/heatshrink_encoder.c **** }
 302:Core/Src/heatshrink_encoder.c **** 
 303:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_tag_bit(heatshrink_encoder *hse,
 304:Core/Src/heatshrink_encoder.c ****         output_info *oi) {
 305:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 306:Core/Src/heatshrink_encoder.c ****         if (hse->match_length == 0) {
 307:Core/Src/heatshrink_encoder.c ****             add_tag_bit(hse, oi, HEATSHRINK_LITERAL_MARKER);
 308:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_LITERAL;
 309:Core/Src/heatshrink_encoder.c ****         } else {
 310:Core/Src/heatshrink_encoder.c ****             add_tag_bit(hse, oi, HEATSHRINK_BACKREF_MARKER);
 311:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits = hse->match_pos - 1;
 312:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_WINDOW_BITS(hse);
 313:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX;
 314:Core/Src/heatshrink_encoder.c ****         }
 315:Core/Src/heatshrink_encoder.c ****     } else {
 316:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_TAG_BIT; /* output is full, continue */
 317:Core/Src/heatshrink_encoder.c ****     }
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 7


 318:Core/Src/heatshrink_encoder.c **** }
 319:Core/Src/heatshrink_encoder.c **** 
 320:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_literal(heatshrink_encoder *hse,
 321:Core/Src/heatshrink_encoder.c ****         output_info *oi) {
 322:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 323:Core/Src/heatshrink_encoder.c ****         push_literal_byte(hse, oi);
 324:Core/Src/heatshrink_encoder.c ****         return HSES_SEARCH;
 325:Core/Src/heatshrink_encoder.c ****     } else {
 326:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_LITERAL;
 327:Core/Src/heatshrink_encoder.c ****     }
 328:Core/Src/heatshrink_encoder.c **** }
 329:Core/Src/heatshrink_encoder.c **** 
 330:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_br_index(heatshrink_encoder *hse,
 331:Core/Src/heatshrink_encoder.c ****         output_info *oi) {
 332:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 333:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref index %u\n", hse->match_pos);
 334:Core/Src/heatshrink_encoder.c ****         if (push_outgoing_bits(hse, oi) > 0) {
 335:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX; /* continue */
 336:Core/Src/heatshrink_encoder.c ****         } else {
 337:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits = hse->match_length - 1;
 338:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse);
 339:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH; /* done */
 340:Core/Src/heatshrink_encoder.c ****         }
 341:Core/Src/heatshrink_encoder.c ****     } else {
 342:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_BR_INDEX; /* continue */
 343:Core/Src/heatshrink_encoder.c ****     }
 344:Core/Src/heatshrink_encoder.c **** }
 345:Core/Src/heatshrink_encoder.c **** 
 346:Core/Src/heatshrink_encoder.c **** static HSE_state st_yield_br_length(heatshrink_encoder *hse,
 347:Core/Src/heatshrink_encoder.c ****         output_info *oi) {
 348:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 349:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref length %u\n", hse->match_length);
 350:Core/Src/heatshrink_encoder.c ****         if (push_outgoing_bits(hse, oi) > 0) {
 351:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH;
 352:Core/Src/heatshrink_encoder.c ****         } else {
 353:Core/Src/heatshrink_encoder.c ****             hse->match_scan_index += hse->match_length;
 354:Core/Src/heatshrink_encoder.c ****             hse->match_length = 0;
 355:Core/Src/heatshrink_encoder.c ****             return HSES_SEARCH;
 356:Core/Src/heatshrink_encoder.c ****         }
 357:Core/Src/heatshrink_encoder.c ****     } else {
 358:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_BR_LENGTH;
 359:Core/Src/heatshrink_encoder.c ****     }
 360:Core/Src/heatshrink_encoder.c **** }
 361:Core/Src/heatshrink_encoder.c **** 
 362:Core/Src/heatshrink_encoder.c **** static HSE_state st_save_backlog(heatshrink_encoder *hse) {
 363:Core/Src/heatshrink_encoder.c ****     LOG("-- saving backlog\n");
 364:Core/Src/heatshrink_encoder.c ****     save_backlog(hse);
 365:Core/Src/heatshrink_encoder.c ****     return HSES_NOT_FULL;
 366:Core/Src/heatshrink_encoder.c **** }
 367:Core/Src/heatshrink_encoder.c **** 
 368:Core/Src/heatshrink_encoder.c **** static HSE_state st_flush_bit_buffer(heatshrink_encoder *hse,
 369:Core/Src/heatshrink_encoder.c ****         output_info *oi) {
 370:Core/Src/heatshrink_encoder.c ****     if (hse->bit_index == 0x80) {
 371:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 372:Core/Src/heatshrink_encoder.c ****         return HSES_DONE;
 373:Core/Src/heatshrink_encoder.c ****     } else if (can_take_byte(oi)) {
 374:Core/Src/heatshrink_encoder.c ****         LOG("-- flushing remaining byte (bit_index == 0x%02x)\n", hse->bit_index);
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 8


 375:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = hse->current_byte;
 376:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 377:Core/Src/heatshrink_encoder.c ****         return HSES_DONE;
 378:Core/Src/heatshrink_encoder.c ****     } else {
 379:Core/Src/heatshrink_encoder.c ****         return HSES_FLUSH_BITS;
 380:Core/Src/heatshrink_encoder.c ****     }
 381:Core/Src/heatshrink_encoder.c **** }
 382:Core/Src/heatshrink_encoder.c **** 
 383:Core/Src/heatshrink_encoder.c **** static void add_tag_bit(heatshrink_encoder *hse, output_info *oi, uint8_t tag) {
 384:Core/Src/heatshrink_encoder.c ****     LOG("-- adding tag bit: %d\n", tag);
 385:Core/Src/heatshrink_encoder.c ****     push_bits(hse, 1, tag, oi);
 386:Core/Src/heatshrink_encoder.c **** }
 387:Core/Src/heatshrink_encoder.c **** 
 388:Core/Src/heatshrink_encoder.c **** static uint16_t get_input_offset(heatshrink_encoder *hse) {
 389:Core/Src/heatshrink_encoder.c ****     return get_input_buffer_size(hse);
 390:Core/Src/heatshrink_encoder.c **** }
 391:Core/Src/heatshrink_encoder.c **** 
 392:Core/Src/heatshrink_encoder.c **** static uint16_t get_input_buffer_size(heatshrink_encoder *hse) {
  27              		.loc 1 392 64 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
 393:Core/Src/heatshrink_encoder.c ****     return (1 << HEATSHRINK_ENCODER_WINDOW_BITS(hse));
  32              		.loc 1 393 5 view .LVU1
 394:Core/Src/heatshrink_encoder.c ****     (void)hse;
  33              		.loc 1 394 5 view .LVU2
 393:Core/Src/heatshrink_encoder.c ****     return (1 << HEATSHRINK_ENCODER_WINDOW_BITS(hse));
  34              		.loc 1 393 12 is_stmt 0 view .LVU3
  35 0000 8020     		movs	r0, #128
  36              	.LVL1:
 395:Core/Src/heatshrink_encoder.c **** }
  37              		.loc 1 395 1 view .LVU4
  38 0002 4000     		lsls	r0, r0, #1
  39              		@ sp needed
  40 0004 7047     		bx	lr
  41              		.cfi_endproc
  42              	.LFE13:
  44              		.section	.text.get_input_offset,"ax",%progbits
  45              		.align	1
  46              		.syntax unified
  47              		.code	16
  48              		.thumb_func
  49              		.fpu softvfp
  51              	get_input_offset:
  52              	.LVL2:
  53              	.LFB12:
 388:Core/Src/heatshrink_encoder.c ****     return get_input_buffer_size(hse);
  54              		.loc 1 388 59 is_stmt 1 view -0
  55              		.cfi_startproc
  56              		@ args = 0, pretend = 0, frame = 0
  57              		@ frame_needed = 0, uses_anonymous_args = 0
 388:Core/Src/heatshrink_encoder.c ****     return get_input_buffer_size(hse);
  58              		.loc 1 388 59 is_stmt 0 view .LVU6
  59 0000 10B5     		push	{r4, lr}
  60              		.cfi_def_cfa_offset 8
  61              		.cfi_offset 4, -8
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 9


  62              		.cfi_offset 14, -4
 389:Core/Src/heatshrink_encoder.c **** }
  63              		.loc 1 389 5 is_stmt 1 view .LVU7
 389:Core/Src/heatshrink_encoder.c **** }
  64              		.loc 1 389 12 is_stmt 0 view .LVU8
  65 0002 FFF7FEFF 		bl	get_input_buffer_size
  66              	.LVL3:
 390:Core/Src/heatshrink_encoder.c **** 
  67              		.loc 1 390 1 view .LVU9
  68              		@ sp needed
  69 0006 10BD     		pop	{r4, pc}
  70              		.cfi_endproc
  71              	.LFE12:
  73              		.section	.text.get_lookahead_size,"ax",%progbits
  74              		.align	1
  75              		.syntax unified
  76              		.code	16
  77              		.thumb_func
  78              		.fpu softvfp
  80              	get_lookahead_size:
  81              	.LVL4:
  82              	.LFB14:
 396:Core/Src/heatshrink_encoder.c **** 
 397:Core/Src/heatshrink_encoder.c **** static uint16_t get_lookahead_size(heatshrink_encoder *hse) {
  83              		.loc 1 397 61 is_stmt 1 view -0
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 0
  86              		@ frame_needed = 0, uses_anonymous_args = 0
  87              		@ link register save eliminated.
 398:Core/Src/heatshrink_encoder.c ****     return (1 << HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse));
  88              		.loc 1 398 5 view .LVU11
 399:Core/Src/heatshrink_encoder.c ****     (void)hse;
  89              		.loc 1 399 5 view .LVU12
 400:Core/Src/heatshrink_encoder.c **** }
  90              		.loc 1 400 1 is_stmt 0 view .LVU13
  91 0000 1020     		movs	r0, #16
  92              	.LVL5:
  93              		.loc 1 400 1 view .LVU14
  94              		@ sp needed
  95 0002 7047     		bx	lr
  96              		.cfi_endproc
  97              	.LFE14:
  99              		.section	.text.is_finishing,"ax",%progbits
 100              		.align	1
 101              		.syntax unified
 102              		.code	16
 103              		.thumb_func
 104              		.fpu softvfp
 106              	is_finishing:
 107              	.LVL6:
 108              	.LFB16:
 401:Core/Src/heatshrink_encoder.c **** 
 402:Core/Src/heatshrink_encoder.c **** static void do_indexing(heatshrink_encoder *hse) {
 403:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_USE_INDEX
 404:Core/Src/heatshrink_encoder.c ****     /* Build an index array I that contains flattened linked lists
 405:Core/Src/heatshrink_encoder.c ****      * for the previous instances of every byte in the buffer.
 406:Core/Src/heatshrink_encoder.c ****      * 
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 10


 407:Core/Src/heatshrink_encoder.c ****      * For example, if buf[200] == 'x', then index[200] will either
 408:Core/Src/heatshrink_encoder.c ****      * be an offset i such that buf[i] == 'x', or a negative offset
 409:Core/Src/heatshrink_encoder.c ****      * to indicate end-of-list. This significantly speeds up matching,
 410:Core/Src/heatshrink_encoder.c ****      * while only using sizeof(uint16_t)*sizeof(buffer) bytes of RAM.
 411:Core/Src/heatshrink_encoder.c ****      *
 412:Core/Src/heatshrink_encoder.c ****      * Future optimization options:
 413:Core/Src/heatshrink_encoder.c ****      * 1. Since any negative value represents end-of-list, the other
 414:Core/Src/heatshrink_encoder.c ****      *    15 bits could be used to improve the index dynamically.
 415:Core/Src/heatshrink_encoder.c ****      *    
 416:Core/Src/heatshrink_encoder.c ****      * 2. Likewise, the last lookahead_sz bytes of the index will
 417:Core/Src/heatshrink_encoder.c ****      *    not be usable, so temporary data could be stored there to
 418:Core/Src/heatshrink_encoder.c ****      *    dynamically improve the index.
 419:Core/Src/heatshrink_encoder.c ****      * */
 420:Core/Src/heatshrink_encoder.c ****     struct hs_index *hsi = HEATSHRINK_ENCODER_INDEX(hse);
 421:Core/Src/heatshrink_encoder.c ****     int16_t last[256];
 422:Core/Src/heatshrink_encoder.c ****     memset(last, 0xFF, sizeof(last));
 423:Core/Src/heatshrink_encoder.c **** 
 424:Core/Src/heatshrink_encoder.c ****     uint8_t * const data = hse->buffer;
 425:Core/Src/heatshrink_encoder.c ****     int16_t * const index = hsi->index;
 426:Core/Src/heatshrink_encoder.c **** 
 427:Core/Src/heatshrink_encoder.c ****     const uint16_t input_offset = get_input_offset(hse);
 428:Core/Src/heatshrink_encoder.c ****     const uint16_t end = input_offset + hse->input_size;
 429:Core/Src/heatshrink_encoder.c **** 
 430:Core/Src/heatshrink_encoder.c ****     for (uint16_t i=0; i<end; i++) {
 431:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 432:Core/Src/heatshrink_encoder.c ****         int16_t lv = last[v];
 433:Core/Src/heatshrink_encoder.c ****         index[i] = lv;
 434:Core/Src/heatshrink_encoder.c ****         last[v] = i;
 435:Core/Src/heatshrink_encoder.c ****     }
 436:Core/Src/heatshrink_encoder.c **** #else
 437:Core/Src/heatshrink_encoder.c ****     (void)hse;
 438:Core/Src/heatshrink_encoder.c **** #endif
 439:Core/Src/heatshrink_encoder.c **** }
 440:Core/Src/heatshrink_encoder.c **** 
 441:Core/Src/heatshrink_encoder.c **** static int is_finishing(heatshrink_encoder *hse) {
 109              		.loc 1 441 50 is_stmt 1 view -0
 110              		.cfi_startproc
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
 113              		@ link register save eliminated.
 442:Core/Src/heatshrink_encoder.c ****     return hse->flags & FLAG_IS_FINISHING;
 114              		.loc 1 442 5 view .LVU16
 115              		.loc 1 442 15 is_stmt 0 view .LVU17
 116 0000 C37A     		ldrb	r3, [r0, #11]
 117              		.loc 1 442 23 view .LVU18
 118 0002 0120     		movs	r0, #1
 119              	.LVL7:
 120              		.loc 1 442 23 view .LVU19
 121 0004 1840     		ands	r0, r3
 443:Core/Src/heatshrink_encoder.c **** }
 122              		.loc 1 443 1 view .LVU20
 123              		@ sp needed
 124 0006 7047     		bx	lr
 125              		.cfi_endproc
 126              	.LFE16:
 128              		.section	.text.can_take_byte,"ax",%progbits
 129              		.align	1
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 11


 130              		.syntax unified
 131              		.code	16
 132              		.thumb_func
 133              		.fpu softvfp
 135              	can_take_byte:
 136              	.LVL8:
 137              	.LFB17:
 444:Core/Src/heatshrink_encoder.c **** 
 445:Core/Src/heatshrink_encoder.c **** static int can_take_byte(output_info *oi) {
 138              		.loc 1 445 43 is_stmt 1 view -0
 139              		.cfi_startproc
 140              		@ args = 0, pretend = 0, frame = 0
 141              		@ frame_needed = 0, uses_anonymous_args = 0
 142              		@ link register save eliminated.
 446:Core/Src/heatshrink_encoder.c ****     return *oi->output_size < oi->buf_size;
 143              		.loc 1 446 5 view .LVU22
 144              		.loc 1 446 15 is_stmt 0 view .LVU23
 145 0000 8368     		ldr	r3, [r0, #8]
 146              		.loc 1 446 12 view .LVU24
 147 0002 1B68     		ldr	r3, [r3]
 148              		.loc 1 446 33 view .LVU25
 149 0004 4068     		ldr	r0, [r0, #4]
 150              	.LVL9:
 151              		.loc 1 446 29 view .LVU26
 152 0006 8342     		cmp	r3, r0
 153 0008 8041     		sbcs	r0, r0, r0
 154 000a 4042     		rsbs	r0, r0, #0
 447:Core/Src/heatshrink_encoder.c **** }
 155              		.loc 1 447 1 view .LVU27
 156              		@ sp needed
 157 000c 7047     		bx	lr
 158              		.cfi_endproc
 159              	.LFE17:
 161              		.section	.text.st_flush_bit_buffer,"ax",%progbits
 162              		.align	1
 163              		.syntax unified
 164              		.code	16
 165              		.thumb_func
 166              		.fpu softvfp
 168              	st_flush_bit_buffer:
 169              	.LVL10:
 170              	.LFB10:
 369:Core/Src/heatshrink_encoder.c ****     if (hse->bit_index == 0x80) {
 171              		.loc 1 369 26 is_stmt 1 view -0
 172              		.cfi_startproc
 173              		@ args = 0, pretend = 0, frame = 0
 174              		@ frame_needed = 0, uses_anonymous_args = 0
 369:Core/Src/heatshrink_encoder.c ****     if (hse->bit_index == 0x80) {
 175              		.loc 1 369 26 is_stmt 0 view .LVU29
 176 0000 70B5     		push	{r4, r5, r6, lr}
 177              		.cfi_def_cfa_offset 16
 178              		.cfi_offset 4, -16
 179              		.cfi_offset 5, -12
 180              		.cfi_offset 6, -8
 181              		.cfi_offset 14, -4
 182 0002 0500     		movs	r5, r0
 183 0004 0C00     		movs	r4, r1
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 12


 370:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 184              		.loc 1 370 5 is_stmt 1 view .LVU30
 370:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 185              		.loc 1 370 12 is_stmt 0 view .LVU31
 186 0006 837B     		ldrb	r3, [r0, #14]
 370:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 187              		.loc 1 370 8 view .LVU32
 188 0008 802B     		cmp	r3, #128
 189 000a 0DD0     		beq	.L8
 373:Core/Src/heatshrink_encoder.c ****         LOG("-- flushing remaining byte (bit_index == 0x%02x)\n", hse->bit_index);
 190              		.loc 1 373 12 is_stmt 1 view .LVU33
 373:Core/Src/heatshrink_encoder.c ****         LOG("-- flushing remaining byte (bit_index == 0x%02x)\n", hse->bit_index);
 191              		.loc 1 373 16 is_stmt 0 view .LVU34
 192 000c 0800     		movs	r0, r1
 193              	.LVL11:
 373:Core/Src/heatshrink_encoder.c ****         LOG("-- flushing remaining byte (bit_index == 0x%02x)\n", hse->bit_index);
 194              		.loc 1 373 16 view .LVU35
 195 000e FFF7FEFF 		bl	can_take_byte
 196              	.LVL12:
 373:Core/Src/heatshrink_encoder.c ****         LOG("-- flushing remaining byte (bit_index == 0x%02x)\n", hse->bit_index);
 197              		.loc 1 373 15 view .LVU36
 198 0012 0028     		cmp	r0, #0
 199 0014 0AD0     		beq	.L9
 374:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = hse->current_byte;
 200              		.loc 1 374 82 is_stmt 1 view .LVU37
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 201              		.loc 1 375 9 view .LVU38
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 202              		.loc 1 375 11 is_stmt 0 view .LVU39
 203 0016 2168     		ldr	r1, [r4]
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 204              		.loc 1 375 21 view .LVU40
 205 0018 A268     		ldr	r2, [r4, #8]
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 206              		.loc 1 375 18 view .LVU41
 207 001a 1368     		ldr	r3, [r2]
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 208              		.loc 1 375 35 view .LVU42
 209 001c 581C     		adds	r0, r3, #1
 210 001e 1060     		str	r0, [r2]
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 211              		.loc 1 375 44 view .LVU43
 212 0020 6A7B     		ldrb	r2, [r5, #13]
 375:Core/Src/heatshrink_encoder.c ****         LOG("-- done!\n");
 213              		.loc 1 375 39 view .LVU44
 214 0022 CA54     		strb	r2, [r1, r3]
 376:Core/Src/heatshrink_encoder.c ****         return HSES_DONE;
 215              		.loc 1 376 26 is_stmt 1 view .LVU45
 377:Core/Src/heatshrink_encoder.c ****     } else {
 216              		.loc 1 377 9 view .LVU46
 377:Core/Src/heatshrink_encoder.c ****     } else {
 217              		.loc 1 377 16 is_stmt 0 view .LVU47
 218 0024 0920     		movs	r0, #9
 219 0026 02E0     		b	.L7
 220              	.LVL13:
 221              	.L8:
 372:Core/Src/heatshrink_encoder.c ****     } else if (can_take_byte(oi)) {
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 13


 222              		.loc 1 372 16 view .LVU48
 223 0028 0920     		movs	r0, #9
 224              	.LVL14:
 372:Core/Src/heatshrink_encoder.c ****     } else if (can_take_byte(oi)) {
 225              		.loc 1 372 16 view .LVU49
 226 002a 00E0     		b	.L7
 227              	.LVL15:
 228              	.L9:
 379:Core/Src/heatshrink_encoder.c ****     }
 229              		.loc 1 379 16 view .LVU50
 230 002c 0820     		movs	r0, #8
 231              	.L7:
 381:Core/Src/heatshrink_encoder.c **** 
 232              		.loc 1 381 1 view .LVU51
 233              		@ sp needed
 234              	.LVL16:
 235              	.LVL17:
 381:Core/Src/heatshrink_encoder.c **** 
 236              		.loc 1 381 1 view .LVU52
 237 002e 70BD     		pop	{r4, r5, r6, pc}
 238              		.cfi_endproc
 239              	.LFE10:
 241              		.section	.text.find_longest_match,"ax",%progbits
 242              		.align	1
 243              		.syntax unified
 244              		.code	16
 245              		.thumb_func
 246              		.fpu softvfp
 248              	find_longest_match:
 249              	.LVL18:
 250              	.LFB18:
 448:Core/Src/heatshrink_encoder.c **** 
 449:Core/Src/heatshrink_encoder.c **** /* Return the longest match for the bytes at buf[end:end+maxlen] between
 450:Core/Src/heatshrink_encoder.c ****  * buf[start] and buf[end-1]. If no match is found, return -1. */
 451:Core/Src/heatshrink_encoder.c **** static uint16_t find_longest_match(heatshrink_encoder *hse, uint16_t start,
 452:Core/Src/heatshrink_encoder.c ****         uint16_t end, const uint16_t maxlen, uint16_t *match_length) {
 251              		.loc 1 452 70 is_stmt 1 view -0
 252              		.cfi_startproc
 253              		@ args = 4, pretend = 0, frame = 8
 254              		@ frame_needed = 0, uses_anonymous_args = 0
 255              		.loc 1 452 70 is_stmt 0 view .LVU54
 256 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 257              		.cfi_def_cfa_offset 20
 258              		.cfi_offset 4, -20
 259              		.cfi_offset 5, -16
 260              		.cfi_offset 6, -12
 261              		.cfi_offset 7, -8
 262              		.cfi_offset 14, -4
 263 0002 DE46     		mov	lr, fp
 264 0004 5746     		mov	r7, r10
 265 0006 4E46     		mov	r6, r9
 266 0008 4546     		mov	r5, r8
 267 000a E0B5     		push	{r5, r6, r7, lr}
 268              		.cfi_def_cfa_offset 36
 269              		.cfi_offset 8, -36
 270              		.cfi_offset 9, -32
 271              		.cfi_offset 10, -28
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 14


 272              		.cfi_offset 11, -24
 273 000c 83B0     		sub	sp, sp, #12
 274              		.cfi_def_cfa_offset 48
 275 000e 8046     		mov	r8, r0
 276 0010 0191     		str	r1, [sp, #4]
 277 0012 9246     		mov	r10, r2
 278 0014 1800     		movs	r0, r3
 279              	.LVL19:
 453:Core/Src/heatshrink_encoder.c ****     LOG("-- scanning for match of buf[%u:%u] between buf[%u:%u] (max %u bytes)\n",
 454:Core/Src/heatshrink_encoder.c ****         end, end + maxlen, start, end + maxlen - 1, maxlen);
 280              		.loc 1 454 60 is_stmt 1 view .LVU55
 455:Core/Src/heatshrink_encoder.c ****     uint8_t *buf = hse->buffer;
 281              		.loc 1 455 5 view .LVU56
 282              		.loc 1 455 14 is_stmt 0 view .LVU57
 283 0016 264B     		ldr	r3, .L25
 284              	.LVL20:
 285              		.loc 1 455 14 view .LVU58
 286 0018 4344     		add	r3, r3, r8
 287 001a 9946     		mov	r9, r3
 288              	.LVL21:
 456:Core/Src/heatshrink_encoder.c **** 
 457:Core/Src/heatshrink_encoder.c ****     uint16_t match_maxlen = 0;
 289              		.loc 1 457 5 is_stmt 1 view .LVU59
 458:Core/Src/heatshrink_encoder.c ****     uint16_t match_index = MATCH_NOT_FOUND;
 290              		.loc 1 458 5 view .LVU60
 459:Core/Src/heatshrink_encoder.c **** 
 460:Core/Src/heatshrink_encoder.c ****     uint16_t len = 0;
 291              		.loc 1 460 5 view .LVU61
 461:Core/Src/heatshrink_encoder.c ****     uint8_t * const needlepoint = &buf[end];
 292              		.loc 1 461 5 view .LVU62
 293              		.loc 1 461 21 is_stmt 0 view .LVU63
 294 001c 1A00     		movs	r2, r3
 295              	.LVL22:
 296              		.loc 1 461 21 view .LVU64
 297 001e 5244     		add	r2, r2, r10
 298              	.LVL23:
 462:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_USE_INDEX
 463:Core/Src/heatshrink_encoder.c ****     struct hs_index *hsi = HEATSHRINK_ENCODER_INDEX(hse);
 299              		.loc 1 463 5 is_stmt 1 view .LVU65
 464:Core/Src/heatshrink_encoder.c ****     int16_t pos = hsi->index[end];
 300              		.loc 1 464 5 view .LVU66
 301              		.loc 1 464 13 is_stmt 0 view .LVU67
 302 0020 5346     		mov	r3, r10
 303              	.LVL24:
 304              		.loc 1 464 13 view .LVU68
 305 0022 5B00     		lsls	r3, r3, #1
 306 0024 4344     		add	r3, r3, r8
 307 0026 1221     		movs	r1, #18
 308 0028 5B5E     		ldrsh	r3, [r3, r1]
 309              	.LVL25:
 465:Core/Src/heatshrink_encoder.c **** 
 466:Core/Src/heatshrink_encoder.c ****     while (pos - (int16_t)start >= 0) {
 310              		.loc 1 466 5 is_stmt 1 view .LVU69
 458:Core/Src/heatshrink_encoder.c **** 
 311              		.loc 1 458 14 is_stmt 0 view .LVU70
 312 002a 2249     		ldr	r1, .L25+4
 313 002c 8B46     		mov	fp, r1
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 15


 457:Core/Src/heatshrink_encoder.c ****     uint16_t match_index = MATCH_NOT_FOUND;
 314              		.loc 1 457 14 view .LVU71
 315 002e 0021     		movs	r1, #0
 316 0030 0F00     		movs	r7, r1
 317              		.loc 1 466 11 view .LVU72
 318 0032 13E0     		b	.L11
 319              	.LVL26:
 320              	.L23:
 321              	.LBB2:
 467:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 468:Core/Src/heatshrink_encoder.c ****         len = 0;
 469:Core/Src/heatshrink_encoder.c **** 
 470:Core/Src/heatshrink_encoder.c ****         /* Only check matches that will potentially beat the current maxlen.
 471:Core/Src/heatshrink_encoder.c ****          * This is redundant with the index if match_maxlen is 0, but the
 472:Core/Src/heatshrink_encoder.c ****          * added branch overhead to check if it == 0 seems to be worse. */
 473:Core/Src/heatshrink_encoder.c ****         if (pospoint[match_maxlen] != needlepoint[match_maxlen]) {
 474:Core/Src/heatshrink_encoder.c ****             pos = hsi->index[pos];
 475:Core/Src/heatshrink_encoder.c ****             continue;
 476:Core/Src/heatshrink_encoder.c ****         }
 477:Core/Src/heatshrink_encoder.c **** 
 478:Core/Src/heatshrink_encoder.c ****         for (len = 1; len < maxlen; len++) {
 322              		.loc 1 478 37 is_stmt 1 discriminator 2 view .LVU73
 323              		.loc 1 478 40 is_stmt 0 discriminator 2 view .LVU74
 324 0034 0131     		adds	r1, r1, #1
 325              	.LVL27:
 326              		.loc 1 478 40 discriminator 2 view .LVU75
 327 0036 89B2     		uxth	r1, r1
 328              	.LVL28:
 329              	.L12:
 330              		.loc 1 478 23 is_stmt 1 discriminator 1 view .LVU76
 331              		.loc 1 478 9 is_stmt 0 discriminator 1 view .LVU77
 332 0038 8142     		cmp	r1, r0
 333 003a 03D2     		bcs	.L14
 479:Core/Src/heatshrink_encoder.c ****             if (pospoint[len] != needlepoint[len]) break;
 334              		.loc 1 479 13 is_stmt 1 view .LVU78
 335              		.loc 1 479 25 is_stmt 0 view .LVU79
 336 003c 755C     		ldrb	r5, [r6, r1]
 337              		.loc 1 479 45 view .LVU80
 338 003e 545C     		ldrb	r4, [r2, r1]
 339              		.loc 1 479 16 view .LVU81
 340 0040 A542     		cmp	r5, r4
 341 0042 F7D0     		beq	.L23
 342              	.L14:
 480:Core/Src/heatshrink_encoder.c ****         }
 481:Core/Src/heatshrink_encoder.c **** 
 482:Core/Src/heatshrink_encoder.c ****         if (len > match_maxlen) {
 343              		.loc 1 482 9 is_stmt 1 view .LVU82
 344              		.loc 1 482 12 is_stmt 0 view .LVU83
 345 0044 8F42     		cmp	r7, r1
 346 0046 04D2     		bcs	.L16
 483:Core/Src/heatshrink_encoder.c ****             match_maxlen = len;
 347              		.loc 1 483 13 is_stmt 1 view .LVU84
 348              	.LVL29:
 484:Core/Src/heatshrink_encoder.c ****             match_index = pos;
 349              		.loc 1 484 13 view .LVU85
 350              		.loc 1 484 25 is_stmt 0 view .LVU86
 351 0048 9BB2     		uxth	r3, r3
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 16


 352              		.loc 1 484 25 view .LVU87
 353 004a 9B46     		mov	fp, r3
 354              	.LVL30:
 485:Core/Src/heatshrink_encoder.c ****             if (len == maxlen) { break; } /* won't find better */
 355              		.loc 1 485 13 is_stmt 1 view .LVU88
 356              		.loc 1 485 16 is_stmt 0 view .LVU89
 357 004c 8142     		cmp	r1, r0
 358 004e 2BD0     		beq	.L21
 483:Core/Src/heatshrink_encoder.c ****             match_maxlen = len;
 359              		.loc 1 483 26 view .LVU90
 360 0050 0F00     		movs	r7, r1
 361              	.LVL31:
 362              	.L16:
 486:Core/Src/heatshrink_encoder.c ****         }
 487:Core/Src/heatshrink_encoder.c ****         pos = hsi->index[pos];
 363              		.loc 1 487 9 is_stmt 1 view .LVU91
 364              		.loc 1 487 13 is_stmt 0 view .LVU92
 365 0052 6346     		mov	r3, ip
 366 0054 5C00     		lsls	r4, r3, #1
 367 0056 4444     		add	r4, r4, r8
 368 0058 1221     		movs	r1, #18
 369 005a 635E     		ldrsh	r3, [r4, r1]
 370              	.LVL32:
 371              	.L11:
 372              		.loc 1 487 13 view .LVU93
 373              	.LBE2:
 466:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 374              		.loc 1 466 11 is_stmt 1 view .LVU94
 466:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 375              		.loc 1 466 16 is_stmt 0 view .LVU95
 376 005c 9C46     		mov	ip, r3
 466:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 377              		.loc 1 466 18 view .LVU96
 378 005e 6946     		mov	r1, sp
 379 0060 0424     		movs	r4, #4
 380 0062 095F     		ldrsh	r1, [r1, r4]
 466:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 381              		.loc 1 466 16 view .LVU97
 382 0064 591A     		subs	r1, r3, r1
 466:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 383              		.loc 1 466 11 view .LVU98
 384 0066 0DD4     		bmi	.L24
 385              	.LBB3:
 467:Core/Src/heatshrink_encoder.c ****         len = 0;
 386              		.loc 1 467 9 is_stmt 1 view .LVU99
 467:Core/Src/heatshrink_encoder.c ****         len = 0;
 387              		.loc 1 467 25 is_stmt 0 view .LVU100
 388 0068 4946     		mov	r1, r9
 389 006a CE18     		adds	r6, r1, r3
 390              	.LVL33:
 468:Core/Src/heatshrink_encoder.c **** 
 391              		.loc 1 468 9 is_stmt 1 view .LVU101
 473:Core/Src/heatshrink_encoder.c ****             pos = hsi->index[pos];
 392              		.loc 1 473 9 view .LVU102
 473:Core/Src/heatshrink_encoder.c ****             pos = hsi->index[pos];
 393              		.loc 1 473 21 is_stmt 0 view .LVU103
 394 006c F55D     		ldrb	r5, [r6, r7]
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 17


 473:Core/Src/heatshrink_encoder.c ****             pos = hsi->index[pos];
 395              		.loc 1 473 50 view .LVU104
 396 006e D15D     		ldrb	r1, [r2, r7]
 473:Core/Src/heatshrink_encoder.c ****             pos = hsi->index[pos];
 397              		.loc 1 473 12 view .LVU105
 398 0070 8D42     		cmp	r5, r1
 399 0072 05D0     		beq	.L20
 474:Core/Src/heatshrink_encoder.c ****             continue;
 400              		.loc 1 474 13 is_stmt 1 view .LVU106
 474:Core/Src/heatshrink_encoder.c ****             continue;
 401              		.loc 1 474 17 is_stmt 0 view .LVU107
 402 0074 6346     		mov	r3, ip
 403              	.LVL34:
 474:Core/Src/heatshrink_encoder.c ****             continue;
 404              		.loc 1 474 17 view .LVU108
 405 0076 5C00     		lsls	r4, r3, #1
 406 0078 4444     		add	r4, r4, r8
 407 007a 1221     		movs	r1, #18
 408 007c 635E     		ldrsh	r3, [r4, r1]
 409              	.LVL35:
 475:Core/Src/heatshrink_encoder.c ****         }
 410              		.loc 1 475 13 is_stmt 1 view .LVU109
 411 007e EDE7     		b	.L11
 412              	.L20:
 478:Core/Src/heatshrink_encoder.c ****             if (pospoint[len] != needlepoint[len]) break;
 413              		.loc 1 478 18 is_stmt 0 view .LVU110
 414 0080 0121     		movs	r1, #1
 415 0082 D9E7     		b	.L12
 416              	.LVL36:
 417              	.L24:
 478:Core/Src/heatshrink_encoder.c ****             if (pospoint[len] != needlepoint[len]) break;
 418              		.loc 1 478 18 view .LVU111
 419 0084 BC46     		mov	ip, r7
 420              	.LVL37:
 421              	.L17:
 478:Core/Src/heatshrink_encoder.c ****             if (pospoint[len] != needlepoint[len]) break;
 422              		.loc 1 478 18 view .LVU112
 423              	.LBE3:
 488:Core/Src/heatshrink_encoder.c ****     }
 489:Core/Src/heatshrink_encoder.c **** #else    
 490:Core/Src/heatshrink_encoder.c ****     for (int16_t pos=end - 1; pos - (int16_t)start >= 0; pos--) {
 491:Core/Src/heatshrink_encoder.c ****         uint8_t * const pospoint = &buf[pos];
 492:Core/Src/heatshrink_encoder.c ****         if ((pospoint[match_maxlen] == needlepoint[match_maxlen])
 493:Core/Src/heatshrink_encoder.c ****             && (*pospoint == *needlepoint)) {
 494:Core/Src/heatshrink_encoder.c ****             for (len=1; len<maxlen; len++) {
 495:Core/Src/heatshrink_encoder.c ****                 if (0) {
 496:Core/Src/heatshrink_encoder.c ****                     LOG("  --> cmp buf[%d] == 0x%02x against %02x (start %u)\n",
 497:Core/Src/heatshrink_encoder.c ****                         pos + len, pospoint[len], needlepoint[len], start);
 498:Core/Src/heatshrink_encoder.c ****                 }
 499:Core/Src/heatshrink_encoder.c ****                 if (pospoint[len] != needlepoint[len]) { break; }
 500:Core/Src/heatshrink_encoder.c ****             }
 501:Core/Src/heatshrink_encoder.c ****             if (len > match_maxlen) {
 502:Core/Src/heatshrink_encoder.c ****                 match_maxlen = len;
 503:Core/Src/heatshrink_encoder.c ****                 match_index = pos;
 504:Core/Src/heatshrink_encoder.c ****                 if (len == maxlen) { break; } /* don't keep searching */
 505:Core/Src/heatshrink_encoder.c ****             }
 506:Core/Src/heatshrink_encoder.c ****         }
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 18


 507:Core/Src/heatshrink_encoder.c ****     }
 508:Core/Src/heatshrink_encoder.c **** #endif
 509:Core/Src/heatshrink_encoder.c ****     
 510:Core/Src/heatshrink_encoder.c ****     const size_t break_even_point =
 424              		.loc 1 510 5 is_stmt 1 view .LVU113
 511:Core/Src/heatshrink_encoder.c ****       (1 + HEATSHRINK_ENCODER_WINDOW_BITS(hse) +
 512:Core/Src/heatshrink_encoder.c ****           HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse));
 513:Core/Src/heatshrink_encoder.c **** 
 514:Core/Src/heatshrink_encoder.c ****     /* Instead of comparing break_even_point against 8*match_maxlen,
 515:Core/Src/heatshrink_encoder.c ****      * compare match_maxlen against break_even_point/8 to avoid
 516:Core/Src/heatshrink_encoder.c ****      * overflow. Since MIN_WINDOW_BITS and MIN_LOOKAHEAD_BITS are 4 and
 517:Core/Src/heatshrink_encoder.c ****      * 3, respectively, break_even_point/8 will always be at least 1. */
 518:Core/Src/heatshrink_encoder.c ****     if (match_maxlen > (break_even_point / 8)) {
 425              		.loc 1 518 5 view .LVU114
 426              		.loc 1 518 8 is_stmt 0 view .LVU115
 427 0086 6346     		mov	r3, ip
 428 0088 012B     		cmp	r3, #1
 429 008a 0FD9     		bls	.L22
 519:Core/Src/heatshrink_encoder.c ****         LOG("-- best match: %u bytes at -%u\n",
 520:Core/Src/heatshrink_encoder.c ****             match_maxlen, end - match_index);
 430              		.loc 1 520 45 is_stmt 1 view .LVU116
 521:Core/Src/heatshrink_encoder.c ****         *match_length = match_maxlen;
 431              		.loc 1 521 9 view .LVU117
 432              		.loc 1 521 23 is_stmt 0 view .LVU118
 433 008c 0C9B     		ldr	r3, [sp, #48]
 434 008e 6246     		mov	r2, ip
 435              	.LVL38:
 436              		.loc 1 521 23 view .LVU119
 437 0090 1A80     		strh	r2, [r3]
 522:Core/Src/heatshrink_encoder.c ****         return end - match_index;
 438              		.loc 1 522 9 is_stmt 1 view .LVU120
 439              		.loc 1 522 20 is_stmt 0 view .LVU121
 440 0092 5346     		mov	r3, r10
 441 0094 5A46     		mov	r2, fp
 442 0096 981A     		subs	r0, r3, r2
 443 0098 80B2     		uxth	r0, r0
 444              	.L19:
 523:Core/Src/heatshrink_encoder.c ****     }
 524:Core/Src/heatshrink_encoder.c ****     LOG("-- none found\n");
 525:Core/Src/heatshrink_encoder.c ****     return MATCH_NOT_FOUND;
 526:Core/Src/heatshrink_encoder.c **** }
 445              		.loc 1 526 1 view .LVU122
 446 009a 03B0     		add	sp, sp, #12
 447              		@ sp needed
 448              	.LVL39:
 449              	.LVL40:
 450              	.LVL41:
 451              	.LVL42:
 452              		.loc 1 526 1 view .LVU123
 453 009c F0BC     		pop	{r4, r5, r6, r7}
 454 009e BB46     		mov	fp, r7
 455 00a0 B246     		mov	r10, r6
 456 00a2 A946     		mov	r9, r5
 457 00a4 A046     		mov	r8, r4
 458 00a6 F0BD     		pop	{r4, r5, r6, r7, pc}
 459              	.LVL43:
 460              	.L21:
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 19


 461              	.LBB4:
 483:Core/Src/heatshrink_encoder.c ****             match_index = pos;
 462              		.loc 1 483 26 view .LVU124
 463 00a8 8C46     		mov	ip, r1
 464 00aa ECE7     		b	.L17
 465              	.LVL44:
 466              	.L22:
 483:Core/Src/heatshrink_encoder.c ****             match_index = pos;
 467              		.loc 1 483 26 view .LVU125
 468              	.LBE4:
 525:Core/Src/heatshrink_encoder.c **** }
 469              		.loc 1 525 12 view .LVU126
 470 00ac 0148     		ldr	r0, .L25+4
 471 00ae F4E7     		b	.L19
 472              	.L26:
 473              		.align	2
 474              	.L25:
 475 00b0 12040000 		.word	1042
 476 00b4 FFFF0000 		.word	65535
 477              		.cfi_endproc
 478              	.LFE18:
 480              		.section	.text.st_step_search,"ax",%progbits
 481              		.align	1
 482              		.syntax unified
 483              		.code	16
 484              		.thumb_func
 485              		.fpu softvfp
 487              	st_step_search:
 488              	.LVL45:
 489              	.LFB4:
 260:Core/Src/heatshrink_encoder.c ****     uint16_t window_length = get_input_buffer_size(hse);
 490              		.loc 1 260 58 is_stmt 1 view -0
 491              		.cfi_startproc
 492              		@ args = 0, pretend = 0, frame = 16
 493              		@ frame_needed = 0, uses_anonymous_args = 0
 260:Core/Src/heatshrink_encoder.c ****     uint16_t window_length = get_input_buffer_size(hse);
 494              		.loc 1 260 58 is_stmt 0 view .LVU128
 495 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 496              		.cfi_def_cfa_offset 20
 497              		.cfi_offset 4, -20
 498              		.cfi_offset 5, -16
 499              		.cfi_offset 6, -12
 500              		.cfi_offset 7, -8
 501              		.cfi_offset 14, -4
 502 0002 C646     		mov	lr, r8
 503 0004 00B5     		push	{lr}
 504              		.cfi_def_cfa_offset 24
 505              		.cfi_offset 8, -24
 506 0006 86B0     		sub	sp, sp, #24
 507              		.cfi_def_cfa_offset 48
 508 0008 0400     		movs	r4, r0
 261:Core/Src/heatshrink_encoder.c ****     uint16_t lookahead_sz = get_lookahead_size(hse);
 509              		.loc 1 261 5 is_stmt 1 view .LVU129
 261:Core/Src/heatshrink_encoder.c ****     uint16_t lookahead_sz = get_lookahead_size(hse);
 510              		.loc 1 261 30 is_stmt 0 view .LVU130
 511 000a FFF7FEFF 		bl	get_input_buffer_size
 512              	.LVL46:
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 20


 261:Core/Src/heatshrink_encoder.c ****     uint16_t lookahead_sz = get_lookahead_size(hse);
 513              		.loc 1 261 30 view .LVU131
 514 000e 0390     		str	r0, [sp, #12]
 515              	.LVL47:
 262:Core/Src/heatshrink_encoder.c ****     uint16_t msi = hse->match_scan_index;
 516              		.loc 1 262 5 is_stmt 1 view .LVU132
 262:Core/Src/heatshrink_encoder.c ****     uint16_t msi = hse->match_scan_index;
 517              		.loc 1 262 29 is_stmt 0 view .LVU133
 518 0010 2000     		movs	r0, r4
 519 0012 FFF7FEFF 		bl	get_lookahead_size
 520              	.LVL48:
 521 0016 0500     		movs	r5, r0
 522 0018 8046     		mov	r8, r0
 523              	.LVL49:
 263:Core/Src/heatshrink_encoder.c ****     LOG("## step_search, scan @ +%d (%d/%d), input size %d\n",
 524              		.loc 1 263 5 is_stmt 1 view .LVU134
 263:Core/Src/heatshrink_encoder.c ****     LOG("## step_search, scan @ +%d (%d/%d), input size %d\n",
 525              		.loc 1 263 14 is_stmt 0 view .LVU135
 526 001a 6688     		ldrh	r6, [r4, #2]
 527              	.LVL50:
 265:Core/Src/heatshrink_encoder.c **** 
 528              		.loc 1 265 70 is_stmt 1 view .LVU136
 267:Core/Src/heatshrink_encoder.c ****     if (msi > hse->input_size - (fin ? 1 : lookahead_sz)) {
 529              		.loc 1 267 5 view .LVU137
 267:Core/Src/heatshrink_encoder.c ****     if (msi > hse->input_size - (fin ? 1 : lookahead_sz)) {
 530              		.loc 1 267 16 is_stmt 0 view .LVU138
 531 001c 2000     		movs	r0, r4
 532 001e FFF7FEFF 		bl	is_finishing
 533              	.LVL51:
 268:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 534              		.loc 1 268 5 is_stmt 1 view .LVU139
 268:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 535              		.loc 1 268 13 is_stmt 0 view .LVU140
 536 0022 3300     		movs	r3, r6
 268:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 537              		.loc 1 268 18 view .LVU141
 538 0024 2788     		ldrh	r7, [r4]
 268:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 539              		.loc 1 268 42 view .LVU142
 540 0026 0028     		cmp	r0, #0
 541 0028 00D0     		beq	.L28
 542 002a 0125     		movs	r5, #1
 543              	.LVL52:
 544              	.L28:
 268:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 545              		.loc 1 268 31 discriminator 4 view .LVU143
 546 002c 7D1B     		subs	r5, r7, r5
 268:Core/Src/heatshrink_encoder.c ****         /* Current search buffer is exhausted, copy it into the
 547              		.loc 1 268 8 discriminator 4 view .LVU144
 548 002e AB42     		cmp	r3, r5
 549 0030 26DC     		bgt	.L36
 275:Core/Src/heatshrink_encoder.c ****     uint16_t end = input_offset + msi;
 550              		.loc 1 275 5 is_stmt 1 view .LVU145
 275:Core/Src/heatshrink_encoder.c ****     uint16_t end = input_offset + msi;
 551              		.loc 1 275 29 is_stmt 0 view .LVU146
 552 0032 2000     		movs	r0, r4
 553              	.LVL53:
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 21


 275:Core/Src/heatshrink_encoder.c ****     uint16_t end = input_offset + msi;
 554              		.loc 1 275 29 view .LVU147
 555 0034 FFF7FEFF 		bl	get_input_offset
 556              	.LVL54:
 276:Core/Src/heatshrink_encoder.c ****     uint16_t start = end - window_length;
 557              		.loc 1 276 5 is_stmt 1 view .LVU148
 276:Core/Src/heatshrink_encoder.c ****     uint16_t start = end - window_length;
 558              		.loc 1 276 14 is_stmt 0 view .LVU149
 559 0038 3018     		adds	r0, r6, r0
 560              	.LVL55:
 276:Core/Src/heatshrink_encoder.c ****     uint16_t start = end - window_length;
 561              		.loc 1 276 14 view .LVU150
 562 003a 82B2     		uxth	r2, r0
 563              	.LVL56:
 277:Core/Src/heatshrink_encoder.c **** 
 564              		.loc 1 277 5 is_stmt 1 view .LVU151
 277:Core/Src/heatshrink_encoder.c **** 
 565              		.loc 1 277 14 is_stmt 0 view .LVU152
 566 003c 039B     		ldr	r3, [sp, #12]
 567 003e D11A     		subs	r1, r2, r3
 568 0040 89B2     		uxth	r1, r1
 569              	.LVL57:
 279:Core/Src/heatshrink_encoder.c ****     if (hse->input_size - msi < lookahead_sz) {
 570              		.loc 1 279 5 is_stmt 1 view .LVU153
 280:Core/Src/heatshrink_encoder.c ****         max_possible = hse->input_size - msi;
 571              		.loc 1 280 5 view .LVU154
 280:Core/Src/heatshrink_encoder.c ****         max_possible = hse->input_size - msi;
 572              		.loc 1 280 25 is_stmt 0 view .LVU155
 573 0042 BB1B     		subs	r3, r7, r6
 280:Core/Src/heatshrink_encoder.c ****         max_possible = hse->input_size - msi;
 574              		.loc 1 280 8 view .LVU156
 575 0044 4345     		cmp	r3, r8
 576 0046 01DA     		bge	.L32
 281:Core/Src/heatshrink_encoder.c ****     }
 577              		.loc 1 281 9 is_stmt 1 view .LVU157
 281:Core/Src/heatshrink_encoder.c ****     }
 578              		.loc 1 281 22 is_stmt 0 view .LVU158
 579 0048 9BB2     		uxth	r3, r3
 580 004a 9846     		mov	r8, r3
 581              	.LVL58:
 582              	.L32:
 284:Core/Src/heatshrink_encoder.c ****     uint16_t match_pos = find_longest_match(hse,
 583              		.loc 1 284 5 is_stmt 1 view .LVU159
 284:Core/Src/heatshrink_encoder.c ****     uint16_t match_pos = find_longest_match(hse,
 584              		.loc 1 284 14 is_stmt 0 view .LVU160
 585 004c 0E23     		movs	r3, #14
 586 004e 02A8     		add	r0, sp, #8
 587 0050 8446     		mov	ip, r0
 588 0052 6344     		add	r3, r3, ip
 589 0054 0020     		movs	r0, #0
 590 0056 1880     		strh	r0, [r3]
 285:Core/Src/heatshrink_encoder.c ****         start, end, max_possible, &match_length);
 591              		.loc 1 285 5 is_stmt 1 view .LVU161
 285:Core/Src/heatshrink_encoder.c ****         start, end, max_possible, &match_length);
 592              		.loc 1 285 26 is_stmt 0 view .LVU162
 593 0058 0093     		str	r3, [sp]
 594 005a 4346     		mov	r3, r8
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 22


 595 005c 2000     		movs	r0, r4
 596 005e FFF7FEFF 		bl	find_longest_match
 597              	.LVL59:
 288:Core/Src/heatshrink_encoder.c ****         LOG("ss Match not found\n");
 598              		.loc 1 288 5 is_stmt 1 view .LVU163
 288:Core/Src/heatshrink_encoder.c ****         LOG("ss Match not found\n");
 599              		.loc 1 288 8 is_stmt 0 view .LVU164
 600 0062 0E4B     		ldr	r3, .L38
 601 0064 9842     		cmp	r0, r3
 602 0066 11D0     		beq	.L37
 294:Core/Src/heatshrink_encoder.c ****         hse->match_pos = match_pos;
 603              		.loc 1 294 75 is_stmt 1 view .LVU165
 295:Core/Src/heatshrink_encoder.c ****         hse->match_length = match_length;
 604              		.loc 1 295 9 view .LVU166
 295:Core/Src/heatshrink_encoder.c ****         hse->match_length = match_length;
 605              		.loc 1 295 24 is_stmt 0 view .LVU167
 606 0068 E080     		strh	r0, [r4, #6]
 296:Core/Src/heatshrink_encoder.c ****         ASSERT(match_pos <= 1 << HEATSHRINK_ENCODER_WINDOW_BITS(hse) /*window_length*/);
 607              		.loc 1 296 9 is_stmt 1 view .LVU168
 296:Core/Src/heatshrink_encoder.c ****         ASSERT(match_pos <= 1 << HEATSHRINK_ENCODER_WINDOW_BITS(hse) /*window_length*/);
 608              		.loc 1 296 27 is_stmt 0 view .LVU169
 609 006a 0E23     		movs	r3, #14
 610 006c 02AA     		add	r2, sp, #8
 611 006e 9446     		mov	ip, r2
 612 0070 6344     		add	r3, r3, ip
 613 0072 1B88     		ldrh	r3, [r3]
 614 0074 A380     		strh	r3, [r4, #4]
 297:Core/Src/heatshrink_encoder.c **** 
 615              		.loc 1 297 88 is_stmt 1 view .LVU170
 299:Core/Src/heatshrink_encoder.c ****     }
 616              		.loc 1 299 9 view .LVU171
 299:Core/Src/heatshrink_encoder.c ****     }
 617              		.loc 1 299 16 is_stmt 0 view .LVU172
 618 0076 0320     		movs	r0, #3
 619              	.LVL60:
 620              	.L31:
 301:Core/Src/heatshrink_encoder.c **** 
 621              		.loc 1 301 1 view .LVU173
 622 0078 06B0     		add	sp, sp, #24
 623              		@ sp needed
 624              	.LVL61:
 625              	.LVL62:
 301:Core/Src/heatshrink_encoder.c **** 
 626              		.loc 1 301 1 view .LVU174
 627 007a 80BC     		pop	{r7}
 628 007c B846     		mov	r8, r7
 629 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 630              	.LVL63:
 631              	.L36:
 271:Core/Src/heatshrink_encoder.c ****         return fin ? HSES_FLUSH_BITS : HSES_SAVE_BACKLOG;
 632              		.loc 1 271 44 is_stmt 1 view .LVU175
 272:Core/Src/heatshrink_encoder.c ****     }
 633              		.loc 1 272 9 view .LVU176
 272:Core/Src/heatshrink_encoder.c ****     }
 634              		.loc 1 272 38 is_stmt 0 view .LVU177
 635 0080 0028     		cmp	r0, #0
 636 0082 01D0     		beq	.L35
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 23


 637 0084 0820     		movs	r0, #8
 638              	.LVL64:
 272:Core/Src/heatshrink_encoder.c ****     }
 639              		.loc 1 272 38 view .LVU178
 640 0086 F7E7     		b	.L31
 641              	.LVL65:
 642              	.L35:
 272:Core/Src/heatshrink_encoder.c ****     }
 643              		.loc 1 272 38 view .LVU179
 644 0088 0720     		movs	r0, #7
 645              	.LVL66:
 272:Core/Src/heatshrink_encoder.c ****     }
 646              		.loc 1 272 38 view .LVU180
 647 008a F5E7     		b	.L31
 648              	.LVL67:
 649              	.L37:
 289:Core/Src/heatshrink_encoder.c ****         hse->match_scan_index++;
 650              		.loc 1 289 36 is_stmt 1 view .LVU181
 290:Core/Src/heatshrink_encoder.c ****         hse->match_length = 0;
 651              		.loc 1 290 9 view .LVU182
 290:Core/Src/heatshrink_encoder.c ****         hse->match_length = 0;
 652              		.loc 1 290 12 is_stmt 0 view .LVU183
 653 008c 6388     		ldrh	r3, [r4, #2]
 290:Core/Src/heatshrink_encoder.c ****         hse->match_length = 0;
 654              		.loc 1 290 30 view .LVU184
 655 008e 0133     		adds	r3, r3, #1
 656 0090 6380     		strh	r3, [r4, #2]
 291:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_TAG_BIT;
 657              		.loc 1 291 9 is_stmt 1 view .LVU185
 291:Core/Src/heatshrink_encoder.c ****         return HSES_YIELD_TAG_BIT;
 658              		.loc 1 291 27 is_stmt 0 view .LVU186
 659 0092 0023     		movs	r3, #0
 660 0094 A380     		strh	r3, [r4, #4]
 292:Core/Src/heatshrink_encoder.c ****     } else {
 661              		.loc 1 292 9 is_stmt 1 view .LVU187
 292:Core/Src/heatshrink_encoder.c ****     } else {
 662              		.loc 1 292 16 is_stmt 0 view .LVU188
 663 0096 0320     		movs	r0, #3
 664              	.LVL68:
 292:Core/Src/heatshrink_encoder.c ****     } else {
 665              		.loc 1 292 16 view .LVU189
 666 0098 EEE7     		b	.L31
 667              	.L39:
 668 009a C046     		.align	2
 669              	.L38:
 670 009c FFFF0000 		.word	65535
 671              		.cfi_endproc
 672              	.LFE4:
 674              		.section	.text.push_bits,"ax",%progbits
 675              		.align	1
 676              		.syntax unified
 677              		.code	16
 678              		.thumb_func
 679              		.fpu softvfp
 681              	push_bits:
 682              	.LVL69:
 683              	.LFB20:
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 24


 527:Core/Src/heatshrink_encoder.c **** 
 528:Core/Src/heatshrink_encoder.c **** static uint8_t push_outgoing_bits(heatshrink_encoder *hse, output_info *oi) {
 529:Core/Src/heatshrink_encoder.c ****     uint8_t count = 0;
 530:Core/Src/heatshrink_encoder.c ****     uint8_t bits = 0;
 531:Core/Src/heatshrink_encoder.c ****     if (hse->outgoing_bits_count > 8) {
 532:Core/Src/heatshrink_encoder.c ****         count = 8;
 533:Core/Src/heatshrink_encoder.c ****         bits = hse->outgoing_bits >> (hse->outgoing_bits_count - 8);
 534:Core/Src/heatshrink_encoder.c ****     } else {
 535:Core/Src/heatshrink_encoder.c ****         count = hse->outgoing_bits_count;
 536:Core/Src/heatshrink_encoder.c ****         bits = hse->outgoing_bits;
 537:Core/Src/heatshrink_encoder.c ****     }
 538:Core/Src/heatshrink_encoder.c **** 
 539:Core/Src/heatshrink_encoder.c ****     if (count > 0) {
 540:Core/Src/heatshrink_encoder.c ****         LOG("-- pushing %d outgoing bits: 0x%02x\n", count, bits);
 541:Core/Src/heatshrink_encoder.c ****         push_bits(hse, count, bits, oi);
 542:Core/Src/heatshrink_encoder.c ****         hse->outgoing_bits_count -= count;
 543:Core/Src/heatshrink_encoder.c ****     }
 544:Core/Src/heatshrink_encoder.c ****     return count;
 545:Core/Src/heatshrink_encoder.c **** }
 546:Core/Src/heatshrink_encoder.c **** 
 547:Core/Src/heatshrink_encoder.c **** /* Push COUNT (max 8) bits to the output buffer, which has room.
 548:Core/Src/heatshrink_encoder.c ****  * Bytes are set from the lowest bits, up. */
 549:Core/Src/heatshrink_encoder.c **** static void push_bits(heatshrink_encoder *hse, uint8_t count, uint8_t bits,
 550:Core/Src/heatshrink_encoder.c ****         output_info *oi) {
 684              		.loc 1 550 26 is_stmt 1 view -0
 685              		.cfi_startproc
 686              		@ args = 0, pretend = 0, frame = 0
 687              		@ frame_needed = 0, uses_anonymous_args = 0
 688              		.loc 1 550 26 is_stmt 0 view .LVU191
 689 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 690              		.cfi_def_cfa_offset 20
 691              		.cfi_offset 4, -20
 692              		.cfi_offset 5, -16
 693              		.cfi_offset 6, -12
 694              		.cfi_offset 7, -8
 695              		.cfi_offset 14, -4
 696 0002 0C00     		movs	r4, r1
 551:Core/Src/heatshrink_encoder.c ****     ASSERT(count <= 8);
 697              		.loc 1 551 23 is_stmt 1 view .LVU192
 552:Core/Src/heatshrink_encoder.c ****     LOG("++ push_bits: %d bits, input of 0x%02x\n", count, bits);
 698              		.loc 1 552 65 view .LVU193
 553:Core/Src/heatshrink_encoder.c **** 
 554:Core/Src/heatshrink_encoder.c ****     /* If adding a whole byte and at the start of a new output byte,
 555:Core/Src/heatshrink_encoder.c ****      * just push it through whole and skip the bit IO loop. */
 556:Core/Src/heatshrink_encoder.c ****     if (count == 8 && hse->bit_index == 0x80) {
 699              		.loc 1 556 5 view .LVU194
 700              		.loc 1 556 8 is_stmt 0 view .LVU195
 701 0004 0829     		cmp	r1, #8
 702 0006 01D0     		beq	.L47
 703              	.LVL70:
 704              	.L41:
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 558:Core/Src/heatshrink_encoder.c ****     } else {
 559:Core/Src/heatshrink_encoder.c ****         for (int i=count - 1; i>=0; i--) {
 705              		.loc 1 559 9 is_stmt 1 view .LVU196
 706              	.LBB5:
 707              		.loc 1 559 14 view .LVU197
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 25


 708              		.loc 1 559 18 is_stmt 0 view .LVU198
 709 0008 013C     		subs	r4, r4, #1
 710              	.LVL71:
 711              		.loc 1 559 9 view .LVU199
 712 000a 0AE0     		b	.L43
 713              	.LVL72:
 714              	.L47:
 715              		.loc 1 559 9 view .LVU200
 716              	.LBE5:
 556:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 717              		.loc 1 556 26 discriminator 1 view .LVU201
 718 000c 817B     		ldrb	r1, [r0, #14]
 719              	.LVL73:
 556:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 720              		.loc 1 556 20 discriminator 1 view .LVU202
 721 000e 8029     		cmp	r1, #128
 722 0010 FAD1     		bne	.L41
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 723              		.loc 1 557 9 is_stmt 1 view .LVU203
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 724              		.loc 1 557 11 is_stmt 0 view .LVU204
 725 0012 1868     		ldr	r0, [r3]
 726              	.LVL74:
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 727              		.loc 1 557 21 view .LVU205
 728 0014 9968     		ldr	r1, [r3, #8]
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 729              		.loc 1 557 18 view .LVU206
 730 0016 0B68     		ldr	r3, [r1]
 731              	.LVL75:
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 732              		.loc 1 557 35 view .LVU207
 733 0018 5C1C     		adds	r4, r3, #1
 734 001a 0C60     		str	r4, [r1]
 557:Core/Src/heatshrink_encoder.c ****         oi->buf[(*oi->output_size)++] = bits;
 735              		.loc 1 557 39 view .LVU208
 736 001c C254     		strb	r2, [r0, r3]
 737              	.L40:
 560:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 561:Core/Src/heatshrink_encoder.c ****             if (bit) { hse->current_byte |= hse->bit_index; }
 562:Core/Src/heatshrink_encoder.c ****             if (0) {
 563:Core/Src/heatshrink_encoder.c ****                 LOG("  -- setting bit %d at bit index 0x%02x, byte => 0x%02x\n",
 564:Core/Src/heatshrink_encoder.c ****                     bit ? 1 : 0, hse->bit_index, hse->current_byte);
 565:Core/Src/heatshrink_encoder.c ****             }
 566:Core/Src/heatshrink_encoder.c ****             hse->bit_index >>= 1;
 567:Core/Src/heatshrink_encoder.c ****             if (hse->bit_index == 0x00) {
 568:Core/Src/heatshrink_encoder.c ****                 hse->bit_index = 0x80;
 569:Core/Src/heatshrink_encoder.c ****                 LOG(" > pushing byte 0x%02x\n", hse->current_byte);
 570:Core/Src/heatshrink_encoder.c ****                 oi->buf[(*oi->output_size)++] = hse->current_byte;
 571:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 572:Core/Src/heatshrink_encoder.c ****             }
 573:Core/Src/heatshrink_encoder.c ****         }
 574:Core/Src/heatshrink_encoder.c ****     }
 575:Core/Src/heatshrink_encoder.c **** }
 738              		.loc 1 575 1 view .LVU209
 739              		@ sp needed
 740 001e F0BD     		pop	{r4, r5, r6, r7, pc}
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 26


 741              	.LVL76:
 742              	.L45:
 743              	.LBB7:
 559:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 744              		.loc 1 559 37 is_stmt 1 discriminator 2 view .LVU210
 559:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 745              		.loc 1 559 38 is_stmt 0 discriminator 2 view .LVU211
 746 0020 013C     		subs	r4, r4, #1
 747              	.LVL77:
 748              	.L43:
 559:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 749              		.loc 1 559 31 is_stmt 1 discriminator 1 view .LVU212
 559:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 750              		.loc 1 559 9 is_stmt 0 discriminator 1 view .LVU213
 751 0022 002C     		cmp	r4, #0
 752 0024 FBDB     		blt	.L40
 753              	.LBB6:
 560:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 754              		.loc 1 560 13 is_stmt 1 view .LVU214
 560:Core/Src/heatshrink_encoder.c ****             bool bit = bits & (1 << i);
 755              		.loc 1 560 34 is_stmt 0 view .LVU215
 756 0026 0121     		movs	r1, #1
 757 0028 A140     		lsls	r1, r1, r4
 758              	.LVL78:
 561:Core/Src/heatshrink_encoder.c ****             if (0) {
 759              		.loc 1 561 13 is_stmt 1 view .LVU216
 561:Core/Src/heatshrink_encoder.c ****             if (0) {
 760              		.loc 1 561 16 is_stmt 0 view .LVU217
 761 002a 1142     		tst	r1, r2
 762 002c 03D0     		beq	.L44
 561:Core/Src/heatshrink_encoder.c ****             if (0) {
 763              		.loc 1 561 24 is_stmt 1 discriminator 1 view .LVU218
 561:Core/Src/heatshrink_encoder.c ****             if (0) {
 764              		.loc 1 561 48 is_stmt 0 discriminator 1 view .LVU219
 765 002e 817B     		ldrb	r1, [r0, #14]
 766              	.LVL79:
 561:Core/Src/heatshrink_encoder.c ****             if (0) {
 767              		.loc 1 561 42 discriminator 1 view .LVU220
 768 0030 457B     		ldrb	r5, [r0, #13]
 769 0032 2943     		orrs	r1, r5
 770 0034 4173     		strb	r1, [r0, #13]
 771              	.L44:
 562:Core/Src/heatshrink_encoder.c ****                 LOG("  -- setting bit %d at bit index 0x%02x, byte => 0x%02x\n",
 772              		.loc 1 562 13 is_stmt 1 view .LVU221
 564:Core/Src/heatshrink_encoder.c ****             }
 773              		.loc 1 564 68 view .LVU222
 566:Core/Src/heatshrink_encoder.c ****             if (hse->bit_index == 0x00) {
 774              		.loc 1 566 13 view .LVU223
 566:Core/Src/heatshrink_encoder.c ****             if (hse->bit_index == 0x00) {
 775              		.loc 1 566 28 is_stmt 0 view .LVU224
 776 0036 817B     		ldrb	r1, [r0, #14]
 777 0038 4908     		lsrs	r1, r1, #1
 778 003a 8173     		strb	r1, [r0, #14]
 567:Core/Src/heatshrink_encoder.c ****                 hse->bit_index = 0x80;
 779              		.loc 1 567 13 is_stmt 1 view .LVU225
 567:Core/Src/heatshrink_encoder.c ****                 hse->bit_index = 0x80;
 780              		.loc 1 567 16 is_stmt 0 view .LVU226
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 27


 781 003c F0D1     		bne	.L45
 568:Core/Src/heatshrink_encoder.c ****                 LOG(" > pushing byte 0x%02x\n", hse->current_byte);
 782              		.loc 1 568 17 is_stmt 1 view .LVU227
 568:Core/Src/heatshrink_encoder.c ****                 LOG(" > pushing byte 0x%02x\n", hse->current_byte);
 783              		.loc 1 568 32 is_stmt 0 view .LVU228
 784 003e 8031     		adds	r1, r1, #128
 785 0040 8173     		strb	r1, [r0, #14]
 569:Core/Src/heatshrink_encoder.c ****                 oi->buf[(*oi->output_size)++] = hse->current_byte;
 786              		.loc 1 569 67 is_stmt 1 view .LVU229
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 787              		.loc 1 570 17 view .LVU230
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 788              		.loc 1 570 19 is_stmt 0 view .LVU231
 789 0042 1E68     		ldr	r6, [r3]
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 790              		.loc 1 570 29 view .LVU232
 791 0044 9D68     		ldr	r5, [r3, #8]
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 792              		.loc 1 570 26 view .LVU233
 793 0046 2968     		ldr	r1, [r5]
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 794              		.loc 1 570 43 view .LVU234
 795 0048 4F1C     		adds	r7, r1, #1
 796 004a 2F60     		str	r7, [r5]
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 797              		.loc 1 570 52 view .LVU235
 798 004c 457B     		ldrb	r5, [r0, #13]
 570:Core/Src/heatshrink_encoder.c ****                 hse->current_byte = 0x00;
 799              		.loc 1 570 47 view .LVU236
 800 004e 7554     		strb	r5, [r6, r1]
 571:Core/Src/heatshrink_encoder.c ****             }
 801              		.loc 1 571 17 is_stmt 1 view .LVU237
 571:Core/Src/heatshrink_encoder.c ****             }
 802              		.loc 1 571 35 is_stmt 0 view .LVU238
 803 0050 0021     		movs	r1, #0
 804 0052 4173     		strb	r1, [r0, #13]
 805 0054 E4E7     		b	.L45
 806              	.LBE6:
 807              	.LBE7:
 808              		.cfi_endproc
 809              	.LFE20:
 811              		.section	.text.add_tag_bit,"ax",%progbits
 812              		.align	1
 813              		.syntax unified
 814              		.code	16
 815              		.thumb_func
 816              		.fpu softvfp
 818              	add_tag_bit:
 819              	.LVL80:
 820              	.LFB11:
 383:Core/Src/heatshrink_encoder.c ****     LOG("-- adding tag bit: %d\n", tag);
 821              		.loc 1 383 80 is_stmt 1 view -0
 822              		.cfi_startproc
 823              		@ args = 0, pretend = 0, frame = 0
 824              		@ frame_needed = 0, uses_anonymous_args = 0
 383:Core/Src/heatshrink_encoder.c ****     LOG("-- adding tag bit: %d\n", tag);
 825              		.loc 1 383 80 is_stmt 0 view .LVU240
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 28


 826 0000 10B5     		push	{r4, lr}
 827              		.cfi_def_cfa_offset 8
 828              		.cfi_offset 4, -8
 829              		.cfi_offset 14, -4
 830 0002 0B00     		movs	r3, r1
 384:Core/Src/heatshrink_encoder.c ****     push_bits(hse, 1, tag, oi);
 831              		.loc 1 384 40 is_stmt 1 view .LVU241
 385:Core/Src/heatshrink_encoder.c **** }
 832              		.loc 1 385 5 view .LVU242
 833 0004 0121     		movs	r1, #1
 834              	.LVL81:
 385:Core/Src/heatshrink_encoder.c **** }
 835              		.loc 1 385 5 is_stmt 0 view .LVU243
 836 0006 FFF7FEFF 		bl	push_bits
 837              	.LVL82:
 386:Core/Src/heatshrink_encoder.c **** 
 838              		.loc 1 386 1 view .LVU244
 839              		@ sp needed
 840 000a 10BD     		pop	{r4, pc}
 841              		.cfi_endproc
 842              	.LFE11:
 844              		.section	.text.st_yield_tag_bit,"ax",%progbits
 845              		.align	1
 846              		.syntax unified
 847              		.code	16
 848              		.thumb_func
 849              		.fpu softvfp
 851              	st_yield_tag_bit:
 852              	.LVL83:
 853              	.LFB5:
 304:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 854              		.loc 1 304 26 is_stmt 1 view -0
 855              		.cfi_startproc
 856              		@ args = 0, pretend = 0, frame = 0
 857              		@ frame_needed = 0, uses_anonymous_args = 0
 304:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 858              		.loc 1 304 26 is_stmt 0 view .LVU246
 859 0000 70B5     		push	{r4, r5, r6, lr}
 860              		.cfi_def_cfa_offset 16
 861              		.cfi_offset 4, -16
 862              		.cfi_offset 5, -12
 863              		.cfi_offset 6, -8
 864              		.cfi_offset 14, -4
 865 0002 0400     		movs	r4, r0
 866 0004 0D00     		movs	r5, r1
 305:Core/Src/heatshrink_encoder.c ****         if (hse->match_length == 0) {
 867              		.loc 1 305 5 is_stmt 1 view .LVU247
 305:Core/Src/heatshrink_encoder.c ****         if (hse->match_length == 0) {
 868              		.loc 1 305 9 is_stmt 0 view .LVU248
 869 0006 0800     		movs	r0, r1
 870              	.LVL84:
 305:Core/Src/heatshrink_encoder.c ****         if (hse->match_length == 0) {
 871              		.loc 1 305 9 view .LVU249
 872 0008 FFF7FEFF 		bl	can_take_byte
 873              	.LVL85:
 305:Core/Src/heatshrink_encoder.c ****         if (hse->match_length == 0) {
 874              		.loc 1 305 8 view .LVU250
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 29


 875 000c 0028     		cmp	r0, #0
 876 000e 15D0     		beq	.L52
 306:Core/Src/heatshrink_encoder.c ****             add_tag_bit(hse, oi, HEATSHRINK_LITERAL_MARKER);
 877              		.loc 1 306 9 is_stmt 1 view .LVU251
 306:Core/Src/heatshrink_encoder.c ****             add_tag_bit(hse, oi, HEATSHRINK_LITERAL_MARKER);
 878              		.loc 1 306 16 is_stmt 0 view .LVU252
 879 0010 A388     		ldrh	r3, [r4, #4]
 306:Core/Src/heatshrink_encoder.c ****             add_tag_bit(hse, oi, HEATSHRINK_LITERAL_MARKER);
 880              		.loc 1 306 12 view .LVU253
 881 0012 002B     		cmp	r3, #0
 882 0014 06D1     		bne	.L51
 307:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_LITERAL;
 883              		.loc 1 307 13 is_stmt 1 view .LVU254
 884 0016 0122     		movs	r2, #1
 885 0018 2900     		movs	r1, r5
 886 001a 2000     		movs	r0, r4
 887 001c FFF7FEFF 		bl	add_tag_bit
 888              	.LVL86:
 308:Core/Src/heatshrink_encoder.c ****         } else {
 889              		.loc 1 308 13 view .LVU255
 308:Core/Src/heatshrink_encoder.c ****         } else {
 890              		.loc 1 308 20 is_stmt 0 view .LVU256
 891 0020 0420     		movs	r0, #4
 892 0022 0CE0     		b	.L50
 893              	.L51:
 310:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits = hse->match_pos - 1;
 894              		.loc 1 310 13 is_stmt 1 view .LVU257
 895 0024 0022     		movs	r2, #0
 896 0026 2900     		movs	r1, r5
 897 0028 2000     		movs	r0, r4
 898 002a FFF7FEFF 		bl	add_tag_bit
 899              	.LVL87:
 311:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_WINDOW_BITS(hse);
 900              		.loc 1 311 13 view .LVU258
 311:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_WINDOW_BITS(hse);
 901              		.loc 1 311 37 is_stmt 0 view .LVU259
 902 002e E388     		ldrh	r3, [r4, #6]
 311:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_WINDOW_BITS(hse);
 903              		.loc 1 311 49 view .LVU260
 904 0030 013B     		subs	r3, r3, #1
 311:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_WINDOW_BITS(hse);
 905              		.loc 1 311 32 view .LVU261
 906 0032 2381     		strh	r3, [r4, #8]
 312:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX;
 907              		.loc 1 312 13 is_stmt 1 view .LVU262
 312:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX;
 908              		.loc 1 312 38 is_stmt 0 view .LVU263
 909 0034 0823     		movs	r3, #8
 910 0036 A372     		strb	r3, [r4, #10]
 313:Core/Src/heatshrink_encoder.c ****         }
 911              		.loc 1 313 13 is_stmt 1 view .LVU264
 313:Core/Src/heatshrink_encoder.c ****         }
 912              		.loc 1 313 20 is_stmt 0 view .LVU265
 913 0038 0520     		movs	r0, #5
 914 003a 00E0     		b	.L50
 915              	.L52:
 316:Core/Src/heatshrink_encoder.c ****     }
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 30


 916              		.loc 1 316 16 view .LVU266
 917 003c 0320     		movs	r0, #3
 918              	.L50:
 318:Core/Src/heatshrink_encoder.c **** 
 919              		.loc 1 318 1 view .LVU267
 920              		@ sp needed
 921              	.LVL88:
 922              	.LVL89:
 318:Core/Src/heatshrink_encoder.c **** 
 923              		.loc 1 318 1 view .LVU268
 924 003e 70BD     		pop	{r4, r5, r6, pc}
 925              		.cfi_endproc
 926              	.LFE5:
 928              		.section	.text.push_outgoing_bits,"ax",%progbits
 929              		.align	1
 930              		.syntax unified
 931              		.code	16
 932              		.thumb_func
 933              		.fpu softvfp
 935              	push_outgoing_bits:
 936              	.LVL90:
 937              	.LFB19:
 528:Core/Src/heatshrink_encoder.c ****     uint8_t count = 0;
 938              		.loc 1 528 77 is_stmt 1 view -0
 939              		.cfi_startproc
 940              		@ args = 0, pretend = 0, frame = 0
 941              		@ frame_needed = 0, uses_anonymous_args = 0
 528:Core/Src/heatshrink_encoder.c ****     uint8_t count = 0;
 942              		.loc 1 528 77 is_stmt 0 view .LVU270
 943 0000 70B5     		push	{r4, r5, r6, lr}
 944              		.cfi_def_cfa_offset 16
 945              		.cfi_offset 4, -16
 946              		.cfi_offset 5, -12
 947              		.cfi_offset 6, -8
 948              		.cfi_offset 14, -4
 949 0002 0400     		movs	r4, r0
 950 0004 0B00     		movs	r3, r1
 529:Core/Src/heatshrink_encoder.c ****     uint8_t bits = 0;
 951              		.loc 1 529 5 is_stmt 1 view .LVU271
 952              	.LVL91:
 530:Core/Src/heatshrink_encoder.c ****     if (hse->outgoing_bits_count > 8) {
 953              		.loc 1 530 5 view .LVU272
 531:Core/Src/heatshrink_encoder.c ****         count = 8;
 954              		.loc 1 531 5 view .LVU273
 531:Core/Src/heatshrink_encoder.c ****         count = 8;
 955              		.loc 1 531 12 is_stmt 0 view .LVU274
 956 0006 857A     		ldrb	r5, [r0, #10]
 531:Core/Src/heatshrink_encoder.c ****         count = 8;
 957              		.loc 1 531 8 view .LVU275
 958 0008 082D     		cmp	r5, #8
 959 000a 0DD9     		bls	.L54
 532:Core/Src/heatshrink_encoder.c ****         bits = hse->outgoing_bits >> (hse->outgoing_bits_count - 8);
 960              		.loc 1 532 9 is_stmt 1 view .LVU276
 961              	.LVL92:
 533:Core/Src/heatshrink_encoder.c ****     } else {
 962              		.loc 1 533 9 view .LVU277
 533:Core/Src/heatshrink_encoder.c ****     } else {
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 31


 963              		.loc 1 533 19 is_stmt 0 view .LVU278
 964 000c 0289     		ldrh	r2, [r0, #8]
 533:Core/Src/heatshrink_encoder.c ****     } else {
 965              		.loc 1 533 64 view .LVU279
 966 000e 083D     		subs	r5, r5, #8
 533:Core/Src/heatshrink_encoder.c ****     } else {
 967              		.loc 1 533 35 view .LVU280
 968 0010 2A41     		asrs	r2, r2, r5
 533:Core/Src/heatshrink_encoder.c ****     } else {
 969              		.loc 1 533 14 view .LVU281
 970 0012 D2B2     		uxtb	r2, r2
 971              	.LVL93:
 539:Core/Src/heatshrink_encoder.c ****         LOG("-- pushing %d outgoing bits: 0x%02x\n", count, bits);
 972              		.loc 1 539 5 is_stmt 1 view .LVU282
 532:Core/Src/heatshrink_encoder.c ****         bits = hse->outgoing_bits >> (hse->outgoing_bits_count - 8);
 973              		.loc 1 532 15 is_stmt 0 view .LVU283
 974 0014 0825     		movs	r5, #8
 975              	.LVL94:
 976              	.L55:
 540:Core/Src/heatshrink_encoder.c ****         push_bits(hse, count, bits, oi);
 977              		.loc 1 540 66 is_stmt 1 view .LVU284
 541:Core/Src/heatshrink_encoder.c ****         hse->outgoing_bits_count -= count;
 978              		.loc 1 541 9 view .LVU285
 979 0016 2900     		movs	r1, r5
 980              	.LVL95:
 541:Core/Src/heatshrink_encoder.c ****         hse->outgoing_bits_count -= count;
 981              		.loc 1 541 9 is_stmt 0 view .LVU286
 982 0018 2000     		movs	r0, r4
 983              	.LVL96:
 541:Core/Src/heatshrink_encoder.c ****         hse->outgoing_bits_count -= count;
 984              		.loc 1 541 9 view .LVU287
 985 001a FFF7FEFF 		bl	push_bits
 986              	.LVL97:
 542:Core/Src/heatshrink_encoder.c ****     }
 987              		.loc 1 542 9 is_stmt 1 view .LVU288
 542:Core/Src/heatshrink_encoder.c ****     }
 988              		.loc 1 542 34 is_stmt 0 view .LVU289
 989 001e A37A     		ldrb	r3, [r4, #10]
 990 0020 5B1B     		subs	r3, r3, r5
 991 0022 A372     		strb	r3, [r4, #10]
 992              	.L56:
 544:Core/Src/heatshrink_encoder.c **** }
 993              		.loc 1 544 5 is_stmt 1 view .LVU290
 545:Core/Src/heatshrink_encoder.c **** 
 994              		.loc 1 545 1 is_stmt 0 view .LVU291
 995 0024 2800     		movs	r0, r5
 996              		@ sp needed
 997              	.LVL98:
 545:Core/Src/heatshrink_encoder.c **** 
 998              		.loc 1 545 1 view .LVU292
 999 0026 70BD     		pop	{r4, r5, r6, pc}
 1000              	.LVL99:
 1001              	.L54:
 535:Core/Src/heatshrink_encoder.c ****         bits = hse->outgoing_bits;
 1002              		.loc 1 535 9 is_stmt 1 view .LVU293
 536:Core/Src/heatshrink_encoder.c ****     }
 1003              		.loc 1 536 9 view .LVU294
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 32


 536:Core/Src/heatshrink_encoder.c ****     }
 1004              		.loc 1 536 14 is_stmt 0 view .LVU295
 1005 0028 027A     		ldrb	r2, [r0, #8]
 1006              	.LVL100:
 539:Core/Src/heatshrink_encoder.c ****         LOG("-- pushing %d outgoing bits: 0x%02x\n", count, bits);
 1007              		.loc 1 539 5 is_stmt 1 view .LVU296
 539:Core/Src/heatshrink_encoder.c ****         LOG("-- pushing %d outgoing bits: 0x%02x\n", count, bits);
 1008              		.loc 1 539 8 is_stmt 0 view .LVU297
 1009 002a 002D     		cmp	r5, #0
 1010 002c FAD0     		beq	.L56
 1011 002e F2E7     		b	.L55
 1012              		.cfi_endproc
 1013              	.LFE19:
 1015              		.section	.text.st_yield_br_index,"ax",%progbits
 1016              		.align	1
 1017              		.syntax unified
 1018              		.code	16
 1019              		.thumb_func
 1020              		.fpu softvfp
 1022              	st_yield_br_index:
 1023              	.LVL101:
 1024              	.LFB7:
 331:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 1025              		.loc 1 331 26 is_stmt 1 view -0
 1026              		.cfi_startproc
 1027              		@ args = 0, pretend = 0, frame = 0
 1028              		@ frame_needed = 0, uses_anonymous_args = 0
 331:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 1029              		.loc 1 331 26 is_stmt 0 view .LVU299
 1030 0000 70B5     		push	{r4, r5, r6, lr}
 1031              		.cfi_def_cfa_offset 16
 1032              		.cfi_offset 4, -16
 1033              		.cfi_offset 5, -12
 1034              		.cfi_offset 6, -8
 1035              		.cfi_offset 14, -4
 1036 0002 0500     		movs	r5, r0
 1037 0004 0C00     		movs	r4, r1
 332:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref index %u\n", hse->match_pos);
 1038              		.loc 1 332 5 is_stmt 1 view .LVU300
 332:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref index %u\n", hse->match_pos);
 1039              		.loc 1 332 9 is_stmt 0 view .LVU301
 1040 0006 0800     		movs	r0, r1
 1041              	.LVL102:
 332:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref index %u\n", hse->match_pos);
 1042              		.loc 1 332 9 view .LVU302
 1043 0008 FFF7FEFF 		bl	can_take_byte
 1044              	.LVL103:
 332:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref index %u\n", hse->match_pos);
 1045              		.loc 1 332 8 view .LVU303
 1046 000c 0028     		cmp	r0, #0
 1047 000e 01D1     		bne	.L61
 342:Core/Src/heatshrink_encoder.c ****     }
 1048              		.loc 1 342 16 view .LVU304
 1049 0010 0520     		movs	r0, #5
 1050              	.L58:
 344:Core/Src/heatshrink_encoder.c **** 
 1051              		.loc 1 344 1 view .LVU305
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 33


 1052              		@ sp needed
 1053              	.LVL104:
 1054              	.LVL105:
 344:Core/Src/heatshrink_encoder.c **** 
 1055              		.loc 1 344 1 view .LVU306
 1056 0012 70BD     		pop	{r4, r5, r6, pc}
 1057              	.LVL106:
 1058              	.L61:
 333:Core/Src/heatshrink_encoder.c ****         if (push_outgoing_bits(hse, oi) > 0) {
 1059              		.loc 1 333 62 is_stmt 1 view .LVU307
 334:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX; /* continue */
 1060              		.loc 1 334 9 view .LVU308
 334:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX; /* continue */
 1061              		.loc 1 334 13 is_stmt 0 view .LVU309
 1062 0014 2100     		movs	r1, r4
 1063 0016 2800     		movs	r0, r5
 1064 0018 FFF7FEFF 		bl	push_outgoing_bits
 1065              	.LVL107:
 334:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_INDEX; /* continue */
 1066              		.loc 1 334 12 view .LVU310
 1067 001c 0028     		cmp	r0, #0
 1068 001e 06D1     		bne	.L60
 337:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse);
 1069              		.loc 1 337 13 is_stmt 1 view .LVU311
 337:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse);
 1070              		.loc 1 337 37 is_stmt 0 view .LVU312
 1071 0020 AB88     		ldrh	r3, [r5, #4]
 337:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse);
 1072              		.loc 1 337 52 view .LVU313
 1073 0022 013B     		subs	r3, r3, #1
 337:Core/Src/heatshrink_encoder.c ****             hse->outgoing_bits_count = HEATSHRINK_ENCODER_LOOKAHEAD_BITS(hse);
 1074              		.loc 1 337 32 view .LVU314
 1075 0024 2B81     		strh	r3, [r5, #8]
 338:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH; /* done */
 1076              		.loc 1 338 13 is_stmt 1 view .LVU315
 338:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH; /* done */
 1077              		.loc 1 338 38 is_stmt 0 view .LVU316
 1078 0026 0423     		movs	r3, #4
 1079 0028 AB72     		strb	r3, [r5, #10]
 339:Core/Src/heatshrink_encoder.c ****         }
 1080              		.loc 1 339 13 is_stmt 1 view .LVU317
 339:Core/Src/heatshrink_encoder.c ****         }
 1081              		.loc 1 339 20 is_stmt 0 view .LVU318
 1082 002a 0630     		adds	r0, r0, #6
 1083 002c F1E7     		b	.L58
 1084              	.L60:
 335:Core/Src/heatshrink_encoder.c ****         } else {
 1085              		.loc 1 335 20 view .LVU319
 1086 002e 0520     		movs	r0, #5
 1087 0030 EFE7     		b	.L58
 1088              		.cfi_endproc
 1089              	.LFE7:
 1091              		.section	.text.st_yield_br_length,"ax",%progbits
 1092              		.align	1
 1093              		.syntax unified
 1094              		.code	16
 1095              		.thumb_func
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 34


 1096              		.fpu softvfp
 1098              	st_yield_br_length:
 1099              	.LVL108:
 1100              	.LFB8:
 347:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 1101              		.loc 1 347 26 is_stmt 1 view -0
 1102              		.cfi_startproc
 1103              		@ args = 0, pretend = 0, frame = 0
 1104              		@ frame_needed = 0, uses_anonymous_args = 0
 347:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 1105              		.loc 1 347 26 is_stmt 0 view .LVU321
 1106 0000 70B5     		push	{r4, r5, r6, lr}
 1107              		.cfi_def_cfa_offset 16
 1108              		.cfi_offset 4, -16
 1109              		.cfi_offset 5, -12
 1110              		.cfi_offset 6, -8
 1111              		.cfi_offset 14, -4
 1112 0002 0500     		movs	r5, r0
 1113 0004 0C00     		movs	r4, r1
 348:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref length %u\n", hse->match_length);
 1114              		.loc 1 348 5 is_stmt 1 view .LVU322
 348:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref length %u\n", hse->match_length);
 1115              		.loc 1 348 9 is_stmt 0 view .LVU323
 1116 0006 0800     		movs	r0, r1
 1117              	.LVL109:
 348:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref length %u\n", hse->match_length);
 1118              		.loc 1 348 9 view .LVU324
 1119 0008 FFF7FEFF 		bl	can_take_byte
 1120              	.LVL110:
 348:Core/Src/heatshrink_encoder.c ****         LOG("-- yielding backref length %u\n", hse->match_length);
 1121              		.loc 1 348 8 view .LVU325
 1122 000c 0028     		cmp	r0, #0
 1123 000e 01D1     		bne	.L66
 358:Core/Src/heatshrink_encoder.c ****     }
 1124              		.loc 1 358 16 view .LVU326
 1125 0010 0620     		movs	r0, #6
 1126              	.L63:
 360:Core/Src/heatshrink_encoder.c **** 
 1127              		.loc 1 360 1 view .LVU327
 1128              		@ sp needed
 1129              	.LVL111:
 1130              	.LVL112:
 360:Core/Src/heatshrink_encoder.c **** 
 1131              		.loc 1 360 1 view .LVU328
 1132 0012 70BD     		pop	{r4, r5, r6, pc}
 1133              	.LVL113:
 1134              	.L66:
 349:Core/Src/heatshrink_encoder.c ****         if (push_outgoing_bits(hse, oi) > 0) {
 1135              		.loc 1 349 66 is_stmt 1 view .LVU329
 350:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH;
 1136              		.loc 1 350 9 view .LVU330
 350:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH;
 1137              		.loc 1 350 13 is_stmt 0 view .LVU331
 1138 0014 2100     		movs	r1, r4
 1139 0016 2800     		movs	r0, r5
 1140 0018 FFF7FEFF 		bl	push_outgoing_bits
 1141              	.LVL114:
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 35


 350:Core/Src/heatshrink_encoder.c ****             return HSES_YIELD_BR_LENGTH;
 1142              		.loc 1 350 12 view .LVU332
 1143 001c 0028     		cmp	r0, #0
 1144 001e 07D1     		bne	.L65
 353:Core/Src/heatshrink_encoder.c ****             hse->match_length = 0;
 1145              		.loc 1 353 13 is_stmt 1 view .LVU333
 353:Core/Src/heatshrink_encoder.c ****             hse->match_length = 0;
 1146              		.loc 1 353 41 is_stmt 0 view .LVU334
 1147 0020 AB88     		ldrh	r3, [r5, #4]
 353:Core/Src/heatshrink_encoder.c ****             hse->match_length = 0;
 1148              		.loc 1 353 35 view .LVU335
 1149 0022 6A88     		ldrh	r2, [r5, #2]
 1150 0024 9B18     		adds	r3, r3, r2
 1151 0026 6B80     		strh	r3, [r5, #2]
 354:Core/Src/heatshrink_encoder.c ****             return HSES_SEARCH;
 1152              		.loc 1 354 13 is_stmt 1 view .LVU336
 354:Core/Src/heatshrink_encoder.c ****             return HSES_SEARCH;
 1153              		.loc 1 354 31 is_stmt 0 view .LVU337
 1154 0028 0023     		movs	r3, #0
 1155 002a AB80     		strh	r3, [r5, #4]
 355:Core/Src/heatshrink_encoder.c ****         }
 1156              		.loc 1 355 13 is_stmt 1 view .LVU338
 355:Core/Src/heatshrink_encoder.c ****         }
 1157              		.loc 1 355 20 is_stmt 0 view .LVU339
 1158 002c 0230     		adds	r0, r0, #2
 1159 002e F0E7     		b	.L63
 1160              	.L65:
 351:Core/Src/heatshrink_encoder.c ****         } else {
 1161              		.loc 1 351 20 view .LVU340
 1162 0030 0620     		movs	r0, #6
 1163 0032 EEE7     		b	.L63
 1164              		.cfi_endproc
 1165              	.LFE8:
 1167              		.section	.text.push_literal_byte,"ax",%progbits
 1168              		.align	1
 1169              		.syntax unified
 1170              		.code	16
 1171              		.thumb_func
 1172              		.fpu softvfp
 1174              	push_literal_byte:
 1175              	.LVL115:
 1176              	.LFB21:
 576:Core/Src/heatshrink_encoder.c **** 
 577:Core/Src/heatshrink_encoder.c **** static void push_literal_byte(heatshrink_encoder *hse, output_info *oi) {
 1177              		.loc 1 577 73 is_stmt 1 view -0
 1178              		.cfi_startproc
 1179              		@ args = 0, pretend = 0, frame = 0
 1180              		@ frame_needed = 0, uses_anonymous_args = 0
 1181              		.loc 1 577 73 is_stmt 0 view .LVU342
 1182 0000 70B5     		push	{r4, r5, r6, lr}
 1183              		.cfi_def_cfa_offset 16
 1184              		.cfi_offset 4, -16
 1185              		.cfi_offset 5, -12
 1186              		.cfi_offset 6, -8
 1187              		.cfi_offset 14, -4
 1188 0002 0400     		movs	r4, r0
 1189 0004 0E00     		movs	r6, r1
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 36


 578:Core/Src/heatshrink_encoder.c ****     uint16_t processed_offset = hse->match_scan_index - 1;
 1190              		.loc 1 578 5 is_stmt 1 view .LVU343
 1191              		.loc 1 578 36 is_stmt 0 view .LVU344
 1192 0006 4288     		ldrh	r2, [r0, #2]
 1193              		.loc 1 578 14 view .LVU345
 1194 0008 013A     		subs	r2, r2, #1
 1195 000a 95B2     		uxth	r5, r2
 1196              	.LVL116:
 579:Core/Src/heatshrink_encoder.c ****     uint16_t input_offset = get_input_offset(hse) + processed_offset;
 1197              		.loc 1 579 5 is_stmt 1 view .LVU346
 1198              		.loc 1 579 29 is_stmt 0 view .LVU347
 1199 000c FFF7FEFF 		bl	get_input_offset
 1200              	.LVL117:
 1201              		.loc 1 579 14 view .LVU348
 1202 0010 4219     		adds	r2, r0, r5
 1203 0012 92B2     		uxth	r2, r2
 1204              	.LVL118:
 580:Core/Src/heatshrink_encoder.c ****     uint8_t c = hse->buffer[input_offset];
 1205              		.loc 1 580 5 is_stmt 1 view .LVU349
 1206              		.loc 1 580 13 is_stmt 0 view .LVU350
 1207 0014 A218     		adds	r2, r4, r2
 1208              	.LVL119:
 1209              		.loc 1 580 13 view .LVU351
 1210 0016 054B     		ldr	r3, .L68
 1211 0018 9C46     		mov	ip, r3
 1212 001a 6244     		add	r2, r2, ip
 1213 001c 1278     		ldrb	r2, [r2]
 1214              	.LVL120:
 581:Core/Src/heatshrink_encoder.c ****     LOG("-- yielded literal byte 0x%02x ('%c') from +%d\n",
 582:Core/Src/heatshrink_encoder.c ****         c, isprint(c) ? c : '.', input_offset);
 1215              		.loc 1 582 47 is_stmt 1 view .LVU352
 583:Core/Src/heatshrink_encoder.c ****     push_bits(hse, 8, c, oi);
 1216              		.loc 1 583 5 view .LVU353
 1217 001e 3300     		movs	r3, r6
 1218 0020 0821     		movs	r1, #8
 1219 0022 2000     		movs	r0, r4
 1220              	.LVL121:
 1221              		.loc 1 583 5 is_stmt 0 view .LVU354
 1222 0024 FFF7FEFF 		bl	push_bits
 1223              	.LVL122:
 584:Core/Src/heatshrink_encoder.c **** }
 1224              		.loc 1 584 1 view .LVU355
 1225              		@ sp needed
 1226              	.LVL123:
 1227              	.LVL124:
 1228              	.LVL125:
 1229              		.loc 1 584 1 view .LVU356
 1230 0028 70BD     		pop	{r4, r5, r6, pc}
 1231              	.L69:
 1232 002a C046     		.align	2
 1233              	.L68:
 1234 002c 12040000 		.word	1042
 1235              		.cfi_endproc
 1236              	.LFE21:
 1238              		.section	.text.st_yield_literal,"ax",%progbits
 1239              		.align	1
 1240              		.syntax unified
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 37


 1241              		.code	16
 1242              		.thumb_func
 1243              		.fpu softvfp
 1245              	st_yield_literal:
 1246              	.LVL126:
 1247              	.LFB6:
 321:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 1248              		.loc 1 321 26 is_stmt 1 view -0
 1249              		.cfi_startproc
 1250              		@ args = 0, pretend = 0, frame = 0
 1251              		@ frame_needed = 0, uses_anonymous_args = 0
 321:Core/Src/heatshrink_encoder.c ****     if (can_take_byte(oi)) {
 1252              		.loc 1 321 26 is_stmt 0 view .LVU358
 1253 0000 70B5     		push	{r4, r5, r6, lr}
 1254              		.cfi_def_cfa_offset 16
 1255              		.cfi_offset 4, -16
 1256              		.cfi_offset 5, -12
 1257              		.cfi_offset 6, -8
 1258              		.cfi_offset 14, -4
 1259 0002 0500     		movs	r5, r0
 1260 0004 0C00     		movs	r4, r1
 322:Core/Src/heatshrink_encoder.c ****         push_literal_byte(hse, oi);
 1261              		.loc 1 322 5 is_stmt 1 view .LVU359
 322:Core/Src/heatshrink_encoder.c ****         push_literal_byte(hse, oi);
 1262              		.loc 1 322 9 is_stmt 0 view .LVU360
 1263 0006 0800     		movs	r0, r1
 1264              	.LVL127:
 322:Core/Src/heatshrink_encoder.c ****         push_literal_byte(hse, oi);
 1265              		.loc 1 322 9 view .LVU361
 1266 0008 FFF7FEFF 		bl	can_take_byte
 1267              	.LVL128:
 322:Core/Src/heatshrink_encoder.c ****         push_literal_byte(hse, oi);
 1268              		.loc 1 322 8 view .LVU362
 1269 000c 0028     		cmp	r0, #0
 1270 000e 01D1     		bne	.L73
 326:Core/Src/heatshrink_encoder.c ****     }
 1271              		.loc 1 326 16 view .LVU363
 1272 0010 0420     		movs	r0, #4
 1273              	.L71:
 328:Core/Src/heatshrink_encoder.c **** 
 1274              		.loc 1 328 1 view .LVU364
 1275              		@ sp needed
 1276              	.LVL129:
 1277              	.LVL130:
 328:Core/Src/heatshrink_encoder.c **** 
 1278              		.loc 1 328 1 view .LVU365
 1279 0012 70BD     		pop	{r4, r5, r6, pc}
 1280              	.LVL131:
 1281              	.L73:
 323:Core/Src/heatshrink_encoder.c ****         return HSES_SEARCH;
 1282              		.loc 1 323 9 is_stmt 1 view .LVU366
 1283 0014 2100     		movs	r1, r4
 1284 0016 2800     		movs	r0, r5
 1285 0018 FFF7FEFF 		bl	push_literal_byte
 1286              	.LVL132:
 324:Core/Src/heatshrink_encoder.c ****     } else {
 1287              		.loc 1 324 9 view .LVU367
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 38


 324:Core/Src/heatshrink_encoder.c ****     } else {
 1288              		.loc 1 324 16 is_stmt 0 view .LVU368
 1289 001c 0220     		movs	r0, #2
 1290 001e F8E7     		b	.L71
 1291              		.cfi_endproc
 1292              	.LFE6:
 1294              		.section	.text.do_indexing,"ax",%progbits
 1295              		.align	1
 1296              		.syntax unified
 1297              		.code	16
 1298              		.thumb_func
 1299              		.fpu softvfp
 1301              	do_indexing:
 1302              	.LVL133:
 1303              	.LFB15:
 402:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_USE_INDEX
 1304              		.loc 1 402 50 is_stmt 1 view -0
 1305              		.cfi_startproc
 1306              		@ args = 0, pretend = 0, frame = 512
 1307              		@ frame_needed = 0, uses_anonymous_args = 0
 402:Core/Src/heatshrink_encoder.c **** #if HEATSHRINK_USE_INDEX
 1308              		.loc 1 402 50 is_stmt 0 view .LVU370
 1309 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1310              		.cfi_def_cfa_offset 20
 1311              		.cfi_offset 4, -20
 1312              		.cfi_offset 5, -16
 1313              		.cfi_offset 6, -12
 1314              		.cfi_offset 7, -8
 1315              		.cfi_offset 14, -4
 1316 0002 124C     		ldr	r4, .L77
 1317 0004 A544     		add	sp, sp, r4
 1318              		.cfi_def_cfa_offset 536
 1319 0006 0700     		movs	r7, r0
 420:Core/Src/heatshrink_encoder.c ****     int16_t last[256];
 1320              		.loc 1 420 5 is_stmt 1 view .LVU371
 1321              	.LVL134:
 421:Core/Src/heatshrink_encoder.c ****     memset(last, 0xFF, sizeof(last));
 1322              		.loc 1 421 5 view .LVU372
 422:Core/Src/heatshrink_encoder.c **** 
 1323              		.loc 1 422 5 view .LVU373
 1324 0008 8022     		movs	r2, #128
 1325 000a 9200     		lsls	r2, r2, #2
 1326 000c FF21     		movs	r1, #255
 1327 000e 6846     		mov	r0, sp
 1328              	.LVL135:
 422:Core/Src/heatshrink_encoder.c **** 
 1329              		.loc 1 422 5 is_stmt 0 view .LVU374
 1330 0010 FFF7FEFF 		bl	memset
 1331              	.LVL136:
 424:Core/Src/heatshrink_encoder.c ****     int16_t * const index = hsi->index;
 1332              		.loc 1 424 5 is_stmt 1 view .LVU375
 424:Core/Src/heatshrink_encoder.c ****     int16_t * const index = hsi->index;
 1333              		.loc 1 424 21 is_stmt 0 view .LVU376
 1334 0014 0E4B     		ldr	r3, .L77+4
 1335 0016 FD18     		adds	r5, r7, r3
 1336              	.LVL137:
 425:Core/Src/heatshrink_encoder.c **** 
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 39


 1337              		.loc 1 425 5 is_stmt 1 view .LVU377
 425:Core/Src/heatshrink_encoder.c **** 
 1338              		.loc 1 425 21 is_stmt 0 view .LVU378
 1339 0018 3C00     		movs	r4, r7
 1340 001a 1234     		adds	r4, r4, #18
 1341              	.LVL138:
 427:Core/Src/heatshrink_encoder.c ****     const uint16_t end = input_offset + hse->input_size;
 1342              		.loc 1 427 5 is_stmt 1 view .LVU379
 427:Core/Src/heatshrink_encoder.c ****     const uint16_t end = input_offset + hse->input_size;
 1343              		.loc 1 427 35 is_stmt 0 view .LVU380
 1344 001c 3800     		movs	r0, r7
 1345 001e FFF7FEFF 		bl	get_input_offset
 1346              	.LVL139:
 428:Core/Src/heatshrink_encoder.c **** 
 1347              		.loc 1 428 5 is_stmt 1 view .LVU381
 428:Core/Src/heatshrink_encoder.c **** 
 1348              		.loc 1 428 44 is_stmt 0 view .LVU382
 1349 0022 3E88     		ldrh	r6, [r7]
 428:Core/Src/heatshrink_encoder.c **** 
 1350              		.loc 1 428 20 view .LVU383
 1351 0024 3618     		adds	r6, r6, r0
 1352 0026 B6B2     		uxth	r6, r6
 1353              	.LVL140:
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1354              		.loc 1 430 5 is_stmt 1 view .LVU384
 1355              	.LBB8:
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1356              		.loc 1 430 10 view .LVU385
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1357              		.loc 1 430 19 is_stmt 0 view .LVU386
 1358 0028 0023     		movs	r3, #0
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1359              		.loc 1 430 5 view .LVU387
 1360 002a 09E0     		b	.L75
 1361              	.LVL141:
 1362              	.L76:
 1363              	.LBB9:
 431:Core/Src/heatshrink_encoder.c ****         int16_t lv = last[v];
 1364              		.loc 1 431 9 is_stmt 1 discriminator 3 view .LVU388
 431:Core/Src/heatshrink_encoder.c ****         int16_t lv = last[v];
 1365              		.loc 1 431 17 is_stmt 0 discriminator 3 view .LVU389
 1366 002c EA5C     		ldrb	r2, [r5, r3]
 1367              	.LVL142:
 432:Core/Src/heatshrink_encoder.c ****         index[i] = lv;
 1368              		.loc 1 432 9 is_stmt 1 discriminator 3 view .LVU390
 432:Core/Src/heatshrink_encoder.c ****         index[i] = lv;
 1369              		.loc 1 432 17 is_stmt 0 discriminator 3 view .LVU391
 1370 002e 5200     		lsls	r2, r2, #1
 1371              	.LVL143:
 432:Core/Src/heatshrink_encoder.c ****         index[i] = lv;
 1372              		.loc 1 432 17 discriminator 3 view .LVU392
 1373 0030 6946     		mov	r1, sp
 1374 0032 505E     		ldrsh	r0, [r2, r1]
 1375              	.LVL144:
 433:Core/Src/heatshrink_encoder.c ****         last[v] = i;
 1376              		.loc 1 433 9 is_stmt 1 discriminator 3 view .LVU393
 433:Core/Src/heatshrink_encoder.c ****         last[v] = i;
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 40


 1377              		.loc 1 433 14 is_stmt 0 discriminator 3 view .LVU394
 1378 0034 5900     		lsls	r1, r3, #1
 433:Core/Src/heatshrink_encoder.c ****         last[v] = i;
 1379              		.loc 1 433 18 discriminator 3 view .LVU395
 1380 0036 6052     		strh	r0, [r4, r1]
 1381              	.LVL145:
 434:Core/Src/heatshrink_encoder.c ****     }
 1382              		.loc 1 434 9 is_stmt 1 discriminator 3 view .LVU396
 434:Core/Src/heatshrink_encoder.c ****     }
 1383              		.loc 1 434 17 is_stmt 0 discriminator 3 view .LVU397
 1384 0038 6946     		mov	r1, sp
 1385 003a 5352     		strh	r3, [r2, r1]
 1386              	.LBE9:
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1387              		.loc 1 430 31 is_stmt 1 discriminator 3 view .LVU398
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1388              		.loc 1 430 32 is_stmt 0 discriminator 3 view .LVU399
 1389 003c 0133     		adds	r3, r3, #1
 1390              	.LVL146:
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1391              		.loc 1 430 32 discriminator 3 view .LVU400
 1392 003e 9BB2     		uxth	r3, r3
 1393              	.LVL147:
 1394              	.L75:
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1395              		.loc 1 430 24 is_stmt 1 discriminator 1 view .LVU401
 430:Core/Src/heatshrink_encoder.c ****         uint8_t v = data[i];
 1396              		.loc 1 430 5 is_stmt 0 discriminator 1 view .LVU402
 1397 0040 B342     		cmp	r3, r6
 1398 0042 F3D3     		bcc	.L76
 1399              	.LBE8:
 439:Core/Src/heatshrink_encoder.c **** 
 1400              		.loc 1 439 1 view .LVU403
 1401 0044 8123     		movs	r3, #129
 1402 0046 9B00     		lsls	r3, r3, #2
 1403              	.LVL148:
 439:Core/Src/heatshrink_encoder.c **** 
 1404              		.loc 1 439 1 view .LVU404
 1405 0048 9D44     		add	sp, sp, r3
 1406              		@ sp needed
 1407              	.LVL149:
 1408              	.LVL150:
 1409              	.LVL151:
 1410              	.LVL152:
 439:Core/Src/heatshrink_encoder.c **** 
 1411              		.loc 1 439 1 view .LVU405
 1412 004a F0BD     		pop	{r4, r5, r6, r7, pc}
 1413              	.L78:
 1414              		.align	2
 1415              	.L77:
 1416 004c FCFDFFFF 		.word	-516
 1417 0050 12040000 		.word	1042
 1418              		.cfi_endproc
 1419              	.LFE15:
 1421              		.section	.text.save_backlog,"ax",%progbits
 1422              		.align	1
 1423              		.syntax unified
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 41


 1424              		.code	16
 1425              		.thumb_func
 1426              		.fpu softvfp
 1428              	save_backlog:
 1429              	.LVL153:
 1430              	.LFB22:
 585:Core/Src/heatshrink_encoder.c **** 
 586:Core/Src/heatshrink_encoder.c **** static void save_backlog(heatshrink_encoder *hse) {
 1431              		.loc 1 586 51 is_stmt 1 view -0
 1432              		.cfi_startproc
 1433              		@ args = 0, pretend = 0, frame = 0
 1434              		@ frame_needed = 0, uses_anonymous_args = 0
 1435              		.loc 1 586 51 is_stmt 0 view .LVU407
 1436 0000 70B5     		push	{r4, r5, r6, lr}
 1437              		.cfi_def_cfa_offset 16
 1438              		.cfi_offset 4, -16
 1439              		.cfi_offset 5, -12
 1440              		.cfi_offset 6, -8
 1441              		.cfi_offset 14, -4
 1442 0002 0400     		movs	r4, r0
 587:Core/Src/heatshrink_encoder.c ****     size_t input_buf_sz = get_input_buffer_size(hse);
 1443              		.loc 1 587 5 is_stmt 1 view .LVU408
 1444              		.loc 1 587 27 is_stmt 0 view .LVU409
 1445 0004 FFF7FEFF 		bl	get_input_buffer_size
 1446              	.LVL154:
 1447              		.loc 1 587 27 view .LVU410
 1448 0008 0100     		movs	r1, r0
 1449              	.LVL155:
 588:Core/Src/heatshrink_encoder.c ****     
 589:Core/Src/heatshrink_encoder.c ****     uint16_t msi = hse->match_scan_index;
 1450              		.loc 1 589 5 is_stmt 1 view .LVU411
 1451              		.loc 1 589 14 is_stmt 0 view .LVU412
 1452 000a 6588     		ldrh	r5, [r4, #2]
 1453              	.LVL156:
 590:Core/Src/heatshrink_encoder.c ****     
 591:Core/Src/heatshrink_encoder.c ****     /* Copy processed data to beginning of buffer, so it can be
 592:Core/Src/heatshrink_encoder.c ****      * used for future matches. Don't bother checking whether the
 593:Core/Src/heatshrink_encoder.c ****      * input is less than the maximum size, because if it isn't,
 594:Core/Src/heatshrink_encoder.c ****      * we're done anyway. */
 595:Core/Src/heatshrink_encoder.c ****     uint16_t rem = input_buf_sz - msi; // unprocessed bytes
 1454              		.loc 1 595 5 is_stmt 1 view .LVU413
 1455              		.loc 1 595 14 is_stmt 0 view .LVU414
 1456 000c 431B     		subs	r3, r0, r5
 1457 000e 9BB2     		uxth	r3, r3
 1458              	.LVL157:
 596:Core/Src/heatshrink_encoder.c ****     uint16_t shift_sz = input_buf_sz + rem;
 1459              		.loc 1 596 5 is_stmt 1 view .LVU415
 1460              		.loc 1 596 14 is_stmt 0 view .LVU416
 1461 0010 C218     		adds	r2, r0, r3
 1462 0012 92B2     		uxth	r2, r2
 1463              	.LVL158:
 597:Core/Src/heatshrink_encoder.c **** 
 598:Core/Src/heatshrink_encoder.c ****     memmove(&hse->buffer[0],
 1464              		.loc 1 598 5 is_stmt 1 view .LVU417
 1465              		.loc 1 598 13 is_stmt 0 view .LVU418
 1466 0014 0848     		ldr	r0, .L80
 1467              	.LVL159:
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 42


 1468              		.loc 1 598 13 view .LVU419
 1469 0016 2018     		adds	r0, r4, r0
 599:Core/Src/heatshrink_encoder.c ****         &hse->buffer[input_buf_sz - rem],
 1470              		.loc 1 599 35 view .LVU420
 1471 0018 C91A     		subs	r1, r1, r3
 1472              	.LVL160:
 1473              		.loc 1 599 9 view .LVU421
 1474 001a 8223     		movs	r3, #130
 1475              	.LVL161:
 1476              		.loc 1 599 9 view .LVU422
 1477 001c DB00     		lsls	r3, r3, #3
 1478 001e 9C46     		mov	ip, r3
 1479 0020 6144     		add	r1, r1, ip
 1480 0022 6118     		adds	r1, r4, r1
 1481 0024 0231     		adds	r1, r1, #2
 598:Core/Src/heatshrink_encoder.c ****         &hse->buffer[input_buf_sz - rem],
 1482              		.loc 1 598 5 view .LVU423
 1483 0026 FFF7FEFF 		bl	memmove
 1484              	.LVL162:
 600:Core/Src/heatshrink_encoder.c ****         shift_sz);
 601:Core/Src/heatshrink_encoder.c ****         
 602:Core/Src/heatshrink_encoder.c ****     hse->match_scan_index = 0;
 1485              		.loc 1 602 5 is_stmt 1 view .LVU424
 1486              		.loc 1 602 27 is_stmt 0 view .LVU425
 1487 002a 0023     		movs	r3, #0
 1488 002c 6380     		strh	r3, [r4, #2]
 603:Core/Src/heatshrink_encoder.c ****     hse->input_size -= input_buf_sz - rem;
 1489              		.loc 1 603 5 is_stmt 1 view .LVU426
 1490              		.loc 1 603 21 is_stmt 0 view .LVU427
 1491 002e 2388     		ldrh	r3, [r4]
 1492 0030 5D1B     		subs	r5, r3, r5
 1493              	.LVL163:
 1494              		.loc 1 603 21 view .LVU428
 1495 0032 2580     		strh	r5, [r4]
 604:Core/Src/heatshrink_encoder.c **** }
 1496              		.loc 1 604 1 view .LVU429
 1497              		@ sp needed
 1498              	.LVL164:
 1499              		.loc 1 604 1 view .LVU430
 1500 0034 70BD     		pop	{r4, r5, r6, pc}
 1501              	.L81:
 1502 0036 C046     		.align	2
 1503              	.L80:
 1504 0038 12040000 		.word	1042
 1505              		.cfi_endproc
 1506              	.LFE22:
 1508              		.section	.text.st_save_backlog,"ax",%progbits
 1509              		.align	1
 1510              		.syntax unified
 1511              		.code	16
 1512              		.thumb_func
 1513              		.fpu softvfp
 1515              	st_save_backlog:
 1516              	.LVL165:
 1517              	.LFB9:
 362:Core/Src/heatshrink_encoder.c ****     LOG("-- saving backlog\n");
 1518              		.loc 1 362 59 is_stmt 1 view -0
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 43


 1519              		.cfi_startproc
 1520              		@ args = 0, pretend = 0, frame = 0
 1521              		@ frame_needed = 0, uses_anonymous_args = 0
 362:Core/Src/heatshrink_encoder.c ****     LOG("-- saving backlog\n");
 1522              		.loc 1 362 59 is_stmt 0 view .LVU432
 1523 0000 10B5     		push	{r4, lr}
 1524              		.cfi_def_cfa_offset 8
 1525              		.cfi_offset 4, -8
 1526              		.cfi_offset 14, -4
 363:Core/Src/heatshrink_encoder.c ****     save_backlog(hse);
 1527              		.loc 1 363 31 is_stmt 1 view .LVU433
 364:Core/Src/heatshrink_encoder.c ****     return HSES_NOT_FULL;
 1528              		.loc 1 364 5 view .LVU434
 1529 0002 FFF7FEFF 		bl	save_backlog
 1530              	.LVL166:
 365:Core/Src/heatshrink_encoder.c **** }
 1531              		.loc 1 365 5 view .LVU435
 366:Core/Src/heatshrink_encoder.c **** 
 1532              		.loc 1 366 1 is_stmt 0 view .LVU436
 1533 0006 0020     		movs	r0, #0
 1534              		@ sp needed
 1535 0008 10BD     		pop	{r4, pc}
 1536              		.cfi_endproc
 1537              	.LFE9:
 1539              		.section	.text.heatshrink_encoder_reset,"ax",%progbits
 1540              		.align	1
 1541              		.global	heatshrink_encoder_reset
 1542              		.syntax unified
 1543              		.code	16
 1544              		.thumb_func
 1545              		.fpu softvfp
 1547              	heatshrink_encoder_reset:
 1548              	.LVL167:
 1549              	.LFB0:
 118:Core/Src/heatshrink_encoder.c ****     size_t buf_sz = (2 << HEATSHRINK_ENCODER_WINDOW_BITS(hse));
 1550              		.loc 1 118 56 is_stmt 1 view -0
 1551              		.cfi_startproc
 1552              		@ args = 0, pretend = 0, frame = 0
 1553              		@ frame_needed = 0, uses_anonymous_args = 0
 118:Core/Src/heatshrink_encoder.c ****     size_t buf_sz = (2 << HEATSHRINK_ENCODER_WINDOW_BITS(hse));
 1554              		.loc 1 118 56 is_stmt 0 view .LVU438
 1555 0000 10B5     		push	{r4, lr}
 1556              		.cfi_def_cfa_offset 8
 1557              		.cfi_offset 4, -8
 1558              		.cfi_offset 14, -4
 1559 0002 0400     		movs	r4, r0
 119:Core/Src/heatshrink_encoder.c ****     memset(hse->buffer, 0, buf_sz);
 1560              		.loc 1 119 5 is_stmt 1 view .LVU439
 1561              	.LVL168:
 120:Core/Src/heatshrink_encoder.c ****     hse->input_size = 0;
 1562              		.loc 1 120 5 view .LVU440
 120:Core/Src/heatshrink_encoder.c ****     hse->input_size = 0;
 1563              		.loc 1 120 15 is_stmt 0 view .LVU441
 1564 0004 094B     		ldr	r3, .L84
 1565 0006 C018     		adds	r0, r0, r3
 1566              	.LVL169:
 120:Core/Src/heatshrink_encoder.c ****     hse->input_size = 0;
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 44


 1567              		.loc 1 120 5 view .LVU442
 1568 0008 8022     		movs	r2, #128
 1569 000a 9200     		lsls	r2, r2, #2
 1570 000c 0021     		movs	r1, #0
 1571 000e FFF7FEFF 		bl	memset
 1572              	.LVL170:
 121:Core/Src/heatshrink_encoder.c ****     hse->state = HSES_NOT_FULL;
 1573              		.loc 1 121 5 is_stmt 1 view .LVU443
 121:Core/Src/heatshrink_encoder.c ****     hse->state = HSES_NOT_FULL;
 1574              		.loc 1 121 21 is_stmt 0 view .LVU444
 1575 0012 0022     		movs	r2, #0
 1576 0014 0023     		movs	r3, #0
 1577 0016 2280     		strh	r2, [r4]
 122:Core/Src/heatshrink_encoder.c ****     hse->match_scan_index = 0;
 1578              		.loc 1 122 5 is_stmt 1 view .LVU445
 122:Core/Src/heatshrink_encoder.c ****     hse->match_scan_index = 0;
 1579              		.loc 1 122 16 is_stmt 0 view .LVU446
 1580 0018 2373     		strb	r3, [r4, #12]
 123:Core/Src/heatshrink_encoder.c ****     hse->flags = 0;
 1581              		.loc 1 123 5 is_stmt 1 view .LVU447
 123:Core/Src/heatshrink_encoder.c ****     hse->flags = 0;
 1582              		.loc 1 123 27 is_stmt 0 view .LVU448
 1583 001a 6280     		strh	r2, [r4, #2]
 124:Core/Src/heatshrink_encoder.c ****     hse->bit_index = 0x80;
 1584              		.loc 1 124 5 is_stmt 1 view .LVU449
 124:Core/Src/heatshrink_encoder.c ****     hse->bit_index = 0x80;
 1585              		.loc 1 124 16 is_stmt 0 view .LVU450
 1586 001c E372     		strb	r3, [r4, #11]
 125:Core/Src/heatshrink_encoder.c ****     hse->current_byte = 0x00;
 1587              		.loc 1 125 5 is_stmt 1 view .LVU451
 125:Core/Src/heatshrink_encoder.c ****     hse->current_byte = 0x00;
 1588              		.loc 1 125 20 is_stmt 0 view .LVU452
 1589 001e 8021     		movs	r1, #128
 1590 0020 A173     		strb	r1, [r4, #14]
 126:Core/Src/heatshrink_encoder.c ****     hse->match_length = 0;
 1591              		.loc 1 126 5 is_stmt 1 view .LVU453
 126:Core/Src/heatshrink_encoder.c ****     hse->match_length = 0;
 1592              		.loc 1 126 23 is_stmt 0 view .LVU454
 1593 0022 6373     		strb	r3, [r4, #13]
 127:Core/Src/heatshrink_encoder.c **** 
 1594              		.loc 1 127 5 is_stmt 1 view .LVU455
 127:Core/Src/heatshrink_encoder.c **** 
 1595              		.loc 1 127 23 is_stmt 0 view .LVU456
 1596 0024 A280     		strh	r2, [r4, #4]
 129:Core/Src/heatshrink_encoder.c ****     hse->outgoing_bits_count = 0;
 1597              		.loc 1 129 5 is_stmt 1 view .LVU457
 129:Core/Src/heatshrink_encoder.c ****     hse->outgoing_bits_count = 0;
 1598              		.loc 1 129 24 is_stmt 0 view .LVU458
 1599 0026 2281     		strh	r2, [r4, #8]
 130:Core/Src/heatshrink_encoder.c **** 
 1600              		.loc 1 130 5 is_stmt 1 view .LVU459
 130:Core/Src/heatshrink_encoder.c **** 
 1601              		.loc 1 130 30 is_stmt 0 view .LVU460
 1602 0028 A372     		strb	r3, [r4, #10]
 135:Core/Src/heatshrink_encoder.c **** 
 1603              		.loc 1 135 1 view .LVU461
 1604              		@ sp needed
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 45


 1605              	.LVL171:
 135:Core/Src/heatshrink_encoder.c **** 
 1606              		.loc 1 135 1 view .LVU462
 1607 002a 10BD     		pop	{r4, pc}
 1608              	.L85:
 1609              		.align	2
 1610              	.L84:
 1611 002c 12040000 		.word	1042
 1612              		.cfi_endproc
 1613              	.LFE0:
 1615              		.section	.text.heatshrink_encoder_sink,"ax",%progbits
 1616              		.align	1
 1617              		.global	heatshrink_encoder_sink
 1618              		.syntax unified
 1619              		.code	16
 1620              		.thumb_func
 1621              		.fpu softvfp
 1623              	heatshrink_encoder_sink:
 1624              	.LVL172:
 1625              	.LFB1:
 138:Core/Src/heatshrink_encoder.c ****     if ((hse == NULL) || (in_buf == NULL) || (input_size == NULL)) {
 1626              		.loc 1 138 59 is_stmt 1 view -0
 1627              		.cfi_startproc
 1628              		@ args = 0, pretend = 0, frame = 0
 1629              		@ frame_needed = 0, uses_anonymous_args = 0
 138:Core/Src/heatshrink_encoder.c ****     if ((hse == NULL) || (in_buf == NULL) || (input_size == NULL)) {
 1630              		.loc 1 138 59 is_stmt 0 view .LVU464
 1631 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1632              		.cfi_def_cfa_offset 20
 1633              		.cfi_offset 4, -20
 1634              		.cfi_offset 5, -16
 1635              		.cfi_offset 6, -12
 1636              		.cfi_offset 7, -8
 1637              		.cfi_offset 14, -4
 1638 0002 D646     		mov	lr, r10
 1639 0004 4F46     		mov	r7, r9
 1640 0006 4646     		mov	r6, r8
 1641 0008 C0B5     		push	{r6, r7, lr}
 1642              		.cfi_def_cfa_offset 32
 1643              		.cfi_offset 8, -32
 1644              		.cfi_offset 9, -28
 1645              		.cfi_offset 10, -24
 1646 000a 0400     		movs	r4, r0
 1647 000c 8946     		mov	r9, r1
 1648 000e 1700     		movs	r7, r2
 1649 0010 9A46     		mov	r10, r3
 139:Core/Src/heatshrink_encoder.c ****         return HSER_SINK_ERROR_NULL;
 1650              		.loc 1 139 5 is_stmt 1 view .LVU465
 139:Core/Src/heatshrink_encoder.c ****         return HSER_SINK_ERROR_NULL;
 1651              		.loc 1 139 8 is_stmt 0 view .LVU466
 1652 0012 0028     		cmp	r0, #0
 1653 0014 38D0     		beq	.L89
 139:Core/Src/heatshrink_encoder.c ****         return HSER_SINK_ERROR_NULL;
 1654              		.loc 1 139 23 discriminator 1 view .LVU467
 1655 0016 0029     		cmp	r1, #0
 1656 0018 39D0     		beq	.L90
 139:Core/Src/heatshrink_encoder.c ****         return HSER_SINK_ERROR_NULL;
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 46


 1657              		.loc 1 139 43 discriminator 2 view .LVU468
 1658 001a 5346     		mov	r3, r10
 139:Core/Src/heatshrink_encoder.c ****         return HSER_SINK_ERROR_NULL;
 1659              		.loc 1 139 43 discriminator 2 view .LVU469
 1660 001c 002B     		cmp	r3, #0
 1661 001e 39D0     		beq	.L91
 144:Core/Src/heatshrink_encoder.c **** 
 1662              		.loc 1 144 5 is_stmt 1 view .LVU470
 144:Core/Src/heatshrink_encoder.c **** 
 1663              		.loc 1 144 9 is_stmt 0 view .LVU471
 1664 0020 FFF7FEFF 		bl	is_finishing
 1665              	.LVL173:
 144:Core/Src/heatshrink_encoder.c **** 
 1666              		.loc 1 144 8 view .LVU472
 1667 0024 0028     		cmp	r0, #0
 1668 0026 38D1     		bne	.L92
 147:Core/Src/heatshrink_encoder.c **** 
 1669              		.loc 1 147 5 is_stmt 1 view .LVU473
 147:Core/Src/heatshrink_encoder.c **** 
 1670              		.loc 1 147 12 is_stmt 0 view .LVU474
 1671 0028 237B     		ldrb	r3, [r4, #12]
 147:Core/Src/heatshrink_encoder.c **** 
 1672              		.loc 1 147 8 view .LVU475
 1673 002a 002B     		cmp	r3, #0
 1674 002c 38D1     		bne	.L93
 149:Core/Src/heatshrink_encoder.c ****     uint16_t ibs = get_input_buffer_size(hse);
 1675              		.loc 1 149 5 is_stmt 1 view .LVU476
 149:Core/Src/heatshrink_encoder.c ****     uint16_t ibs = get_input_buffer_size(hse);
 1676              		.loc 1 149 29 is_stmt 0 view .LVU477
 1677 002e 2000     		movs	r0, r4
 1678 0030 FFF7FEFF 		bl	get_input_offset
 1679              	.LVL174:
 149:Core/Src/heatshrink_encoder.c ****     uint16_t ibs = get_input_buffer_size(hse);
 1680              		.loc 1 149 56 view .LVU478
 1681 0034 2688     		ldrh	r6, [r4]
 149:Core/Src/heatshrink_encoder.c ****     uint16_t ibs = get_input_buffer_size(hse);
 1682              		.loc 1 149 14 view .LVU479
 1683 0036 8019     		adds	r0, r0, r6
 1684 0038 85B2     		uxth	r5, r0
 1685              	.LVL175:
 150:Core/Src/heatshrink_encoder.c ****     uint16_t rem = ibs - hse->input_size;
 1686              		.loc 1 150 5 is_stmt 1 view .LVU480
 150:Core/Src/heatshrink_encoder.c ****     uint16_t rem = ibs - hse->input_size;
 1687              		.loc 1 150 20 is_stmt 0 view .LVU481
 1688 003a 2000     		movs	r0, r4
 1689 003c FFF7FEFF 		bl	get_input_buffer_size
 1690              	.LVL176:
 151:Core/Src/heatshrink_encoder.c ****     uint16_t cp_sz = rem < size ? rem : size;
 1691              		.loc 1 151 5 is_stmt 1 view .LVU482
 151:Core/Src/heatshrink_encoder.c ****     uint16_t cp_sz = rem < size ? rem : size;
 1692              		.loc 1 151 14 is_stmt 0 view .LVU483
 1693 0040 801B     		subs	r0, r0, r6
 1694              	.LVL177:
 151:Core/Src/heatshrink_encoder.c ****     uint16_t cp_sz = rem < size ? rem : size;
 1695              		.loc 1 151 14 view .LVU484
 1696 0042 83B2     		uxth	r3, r0
 1697 0044 9846     		mov	r8, r3
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 47


 1698              	.LVL178:
 152:Core/Src/heatshrink_encoder.c **** 
 1699              		.loc 1 152 5 is_stmt 1 view .LVU485
 152:Core/Src/heatshrink_encoder.c **** 
 1700              		.loc 1 152 39 is_stmt 0 view .LVU486
 1701 0046 1E00     		movs	r6, r3
 1702 0048 BB42     		cmp	r3, r7
 1703 004a 00D9     		bls	.L88
 1704 004c 3E00     		movs	r6, r7
 1705              	.L88:
 152:Core/Src/heatshrink_encoder.c **** 
 1706              		.loc 1 152 14 view .LVU487
 1707 004e B7B2     		uxth	r7, r6
 1708              	.LVL179:
 154:Core/Src/heatshrink_encoder.c ****     *input_size = cp_sz;
 1709              		.loc 1 154 5 is_stmt 1 view .LVU488
 154:Core/Src/heatshrink_encoder.c ****     *input_size = cp_sz;
 1710              		.loc 1 154 12 is_stmt 0 view .LVU489
 1711 0050 8223     		movs	r3, #130
 1712              	.LVL180:
 154:Core/Src/heatshrink_encoder.c ****     *input_size = cp_sz;
 1713              		.loc 1 154 12 view .LVU490
 1714 0052 DB00     		lsls	r3, r3, #3
 1715 0054 E818     		adds	r0, r5, r3
 1716 0056 2018     		adds	r0, r4, r0
 1717 0058 0230     		adds	r0, r0, #2
 1718 005a 3604     		lsls	r6, r6, #16
 1719 005c 360C     		lsrs	r6, r6, #16
 154:Core/Src/heatshrink_encoder.c ****     *input_size = cp_sz;
 1720              		.loc 1 154 5 view .LVU491
 1721 005e 3200     		movs	r2, r6
 1722 0060 4946     		mov	r1, r9
 1723 0062 FFF7FEFF 		bl	memcpy
 1724              	.LVL181:
 155:Core/Src/heatshrink_encoder.c ****     hse->input_size += cp_sz;
 1725              		.loc 1 155 5 is_stmt 1 view .LVU492
 155:Core/Src/heatshrink_encoder.c ****     hse->input_size += cp_sz;
 1726              		.loc 1 155 17 is_stmt 0 view .LVU493
 1727 0066 5346     		mov	r3, r10
 1728 0068 1E60     		str	r6, [r3]
 156:Core/Src/heatshrink_encoder.c **** 
 1729              		.loc 1 156 5 is_stmt 1 view .LVU494
 156:Core/Src/heatshrink_encoder.c **** 
 1730              		.loc 1 156 21 is_stmt 0 view .LVU495
 1731 006a 2388     		ldrh	r3, [r4]
 1732 006c FB18     		adds	r3, r7, r3
 1733 006e 2380     		strh	r3, [r4]
 159:Core/Src/heatshrink_encoder.c ****     if (cp_sz == rem) {
 1734              		.loc 1 159 52 is_stmt 1 view .LVU496
 160:Core/Src/heatshrink_encoder.c ****         LOG("-- internal buffer is now full\n");
 1735              		.loc 1 160 5 view .LVU497
 160:Core/Src/heatshrink_encoder.c ****         LOG("-- internal buffer is now full\n");
 1736              		.loc 1 160 8 is_stmt 0 view .LVU498
 1737 0070 B845     		cmp	r8, r7
 1738 0072 05D0     		beq	.L95
 165:Core/Src/heatshrink_encoder.c **** }
 1739              		.loc 1 165 12 view .LVU499
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 48


 1740 0074 0020     		movs	r0, #0
 1741              	.LVL182:
 1742              	.L87:
 166:Core/Src/heatshrink_encoder.c **** 
 1743              		.loc 1 166 1 view .LVU500
 1744              		@ sp needed
 1745              	.LVL183:
 1746              	.LVL184:
 1747              	.LVL185:
 166:Core/Src/heatshrink_encoder.c **** 
 1748              		.loc 1 166 1 view .LVU501
 1749 0076 E0BC     		pop	{r5, r6, r7}
 1750 0078 BA46     		mov	r10, r7
 1751 007a B146     		mov	r9, r6
 1752 007c A846     		mov	r8, r5
 1753 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 1754              	.LVL186:
 1755              	.L95:
 161:Core/Src/heatshrink_encoder.c ****         hse->state = HSES_FILLED;
 1756              		.loc 1 161 48 is_stmt 1 view .LVU502
 162:Core/Src/heatshrink_encoder.c ****     }
 1757              		.loc 1 162 9 view .LVU503
 162:Core/Src/heatshrink_encoder.c ****     }
 1758              		.loc 1 162 20 is_stmt 0 view .LVU504
 1759 0080 0123     		movs	r3, #1
 1760 0082 2373     		strb	r3, [r4, #12]
 165:Core/Src/heatshrink_encoder.c **** }
 1761              		.loc 1 165 12 view .LVU505
 1762 0084 0020     		movs	r0, #0
 1763 0086 F6E7     		b	.L87
 1764              	.LVL187:
 1765              	.L89:
 140:Core/Src/heatshrink_encoder.c ****     }
 1766              		.loc 1 140 16 view .LVU506
 1767 0088 0120     		movs	r0, #1
 1768              	.LVL188:
 140:Core/Src/heatshrink_encoder.c ****     }
 1769              		.loc 1 140 16 view .LVU507
 1770 008a 4042     		rsbs	r0, r0, #0
 1771 008c F3E7     		b	.L87
 1772              	.LVL189:
 1773              	.L90:
 140:Core/Src/heatshrink_encoder.c ****     }
 1774              		.loc 1 140 16 view .LVU508
 1775 008e 0120     		movs	r0, #1
 1776              	.LVL190:
 140:Core/Src/heatshrink_encoder.c ****     }
 1777              		.loc 1 140 16 view .LVU509
 1778 0090 4042     		rsbs	r0, r0, #0
 1779 0092 F0E7     		b	.L87
 1780              	.LVL191:
 1781              	.L91:
 140:Core/Src/heatshrink_encoder.c ****     }
 1782              		.loc 1 140 16 view .LVU510
 1783 0094 0120     		movs	r0, #1
 1784              	.LVL192:
 140:Core/Src/heatshrink_encoder.c ****     }
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 49


 1785              		.loc 1 140 16 view .LVU511
 1786 0096 4042     		rsbs	r0, r0, #0
 1787 0098 EDE7     		b	.L87
 1788              	.LVL193:
 1789              	.L92:
 144:Core/Src/heatshrink_encoder.c **** 
 1790              		.loc 1 144 37 view .LVU512
 1791 009a 0220     		movs	r0, #2
 1792 009c 4042     		rsbs	r0, r0, #0
 1793 009e EAE7     		b	.L87
 1794              	.L93:
 147:Core/Src/heatshrink_encoder.c **** 
 1795              		.loc 1 147 47 view .LVU513
 1796 00a0 0220     		movs	r0, #2
 1797 00a2 4042     		rsbs	r0, r0, #0
 1798 00a4 E7E7     		b	.L87
 1799              		.cfi_endproc
 1800              	.LFE1:
 1802              		.section	.text.heatshrink_encoder_poll,"ax",%progbits
 1803              		.align	1
 1804              		.global	heatshrink_encoder_poll
 1805              		.syntax unified
 1806              		.code	16
 1807              		.thumb_func
 1808              		.fpu softvfp
 1810              	heatshrink_encoder_poll:
 1811              	.LVL194:
 1812              	.LFB2:
 191:Core/Src/heatshrink_encoder.c ****     if ((hse == NULL) || (out_buf == NULL) || (output_size == NULL)) {
 1813              		.loc 1 191 69 is_stmt 1 view -0
 1814              		.cfi_startproc
 1815              		@ args = 0, pretend = 0, frame = 16
 1816              		@ frame_needed = 0, uses_anonymous_args = 0
 191:Core/Src/heatshrink_encoder.c ****     if ((hse == NULL) || (out_buf == NULL) || (output_size == NULL)) {
 1817              		.loc 1 191 69 is_stmt 0 view .LVU515
 1818 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1819              		.cfi_def_cfa_offset 20
 1820              		.cfi_offset 4, -20
 1821              		.cfi_offset 5, -16
 1822              		.cfi_offset 6, -12
 1823              		.cfi_offset 7, -8
 1824              		.cfi_offset 14, -4
 1825 0002 85B0     		sub	sp, sp, #20
 1826              		.cfi_def_cfa_offset 40
 1827 0004 0400     		movs	r4, r0
 1828 0006 1700     		movs	r7, r2
 1829 0008 1E00     		movs	r6, r3
 192:Core/Src/heatshrink_encoder.c ****         return HSER_POLL_ERROR_NULL;
 1830              		.loc 1 192 5 is_stmt 1 view .LVU516
 192:Core/Src/heatshrink_encoder.c ****         return HSER_POLL_ERROR_NULL;
 1831              		.loc 1 192 8 is_stmt 0 view .LVU517
 1832 000a 0028     		cmp	r0, #0
 1833 000c 4BD0     		beq	.L110
 192:Core/Src/heatshrink_encoder.c ****         return HSER_POLL_ERROR_NULL;
 1834              		.loc 1 192 23 discriminator 1 view .LVU518
 1835 000e 0029     		cmp	r1, #0
 1836 0010 4CD0     		beq	.L111
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 50


 192:Core/Src/heatshrink_encoder.c ****         return HSER_POLL_ERROR_NULL;
 1837              		.loc 1 192 44 discriminator 2 view .LVU519
 1838 0012 002B     		cmp	r3, #0
 1839 0014 4DD0     		beq	.L112
 195:Core/Src/heatshrink_encoder.c ****         LOG("-- MISUSE: output buffer size is 0\n");
 1840              		.loc 1 195 5 is_stmt 1 view .LVU520
 195:Core/Src/heatshrink_encoder.c ****         LOG("-- MISUSE: output buffer size is 0\n");
 1841              		.loc 1 195 8 is_stmt 0 view .LVU521
 1842 0016 002A     		cmp	r2, #0
 1843 0018 4ED0     		beq	.L113
 199:Core/Src/heatshrink_encoder.c **** 
 1844              		.loc 1 199 5 is_stmt 1 view .LVU522
 199:Core/Src/heatshrink_encoder.c **** 
 1845              		.loc 1 199 18 is_stmt 0 view .LVU523
 1846 001a 0023     		movs	r3, #0
 1847              	.LVL195:
 199:Core/Src/heatshrink_encoder.c **** 
 1848              		.loc 1 199 18 view .LVU524
 1849 001c 3360     		str	r3, [r6]
 201:Core/Src/heatshrink_encoder.c ****     oi.buf = out_buf;
 1850              		.loc 1 201 5 is_stmt 1 view .LVU525
 202:Core/Src/heatshrink_encoder.c ****     oi.buf_size = out_buf_size;
 1851              		.loc 1 202 5 view .LVU526
 202:Core/Src/heatshrink_encoder.c ****     oi.buf_size = out_buf_size;
 1852              		.loc 1 202 12 is_stmt 0 view .LVU527
 1853 001e 0191     		str	r1, [sp, #4]
 203:Core/Src/heatshrink_encoder.c ****     oi.output_size = output_size;
 1854              		.loc 1 203 5 is_stmt 1 view .LVU528
 203:Core/Src/heatshrink_encoder.c ****     oi.output_size = output_size;
 1855              		.loc 1 203 17 is_stmt 0 view .LVU529
 1856 0020 0292     		str	r2, [sp, #8]
 204:Core/Src/heatshrink_encoder.c **** 
 1857              		.loc 1 204 5 is_stmt 1 view .LVU530
 204:Core/Src/heatshrink_encoder.c **** 
 1858              		.loc 1 204 20 is_stmt 0 view .LVU531
 1859 0022 0396     		str	r6, [sp, #12]
 1860 0024 0AE0     		b	.L109
 1861              	.LVL196:
 1862              	.L98:
 1863              	.LBB10:
 210:Core/Src/heatshrink_encoder.c ****         switch (in_state) {
 1864              		.loc 1 210 17 view .LVU532
 1865 0026 0020     		movs	r0, #0
 1866              	.LVL197:
 1867              	.L97:
 210:Core/Src/heatshrink_encoder.c ****         switch (in_state) {
 1868              		.loc 1 210 17 view .LVU533
 1869              	.LBE10:
 250:Core/Src/heatshrink_encoder.c **** 
 1870              		.loc 1 250 1 view .LVU534
 1871 0028 05B0     		add	sp, sp, #20
 1872              		@ sp needed
 1873              	.LVL198:
 1874              	.LVL199:
 1875              	.LVL200:
 250:Core/Src/heatshrink_encoder.c **** 
 1876              		.loc 1 250 1 view .LVU535
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 51


 1877 002a F0BD     		pop	{r4, r5, r6, r7, pc}
 1878              	.LVL201:
 1879              	.L107:
 1880              	.LBB11:
 215:Core/Src/heatshrink_encoder.c ****             hse->state = HSES_SEARCH;
 1881              		.loc 1 215 13 is_stmt 1 view .LVU536
 1882 002c 2000     		movs	r0, r4
 1883 002e FFF7FEFF 		bl	do_indexing
 1884              	.LVL202:
 216:Core/Src/heatshrink_encoder.c ****             break;
 1885              		.loc 1 216 13 view .LVU537
 216:Core/Src/heatshrink_encoder.c ****             break;
 1886              		.loc 1 216 24 is_stmt 0 view .LVU538
 1887 0032 0223     		movs	r3, #2
 1888 0034 2373     		strb	r3, [r4, #12]
 217:Core/Src/heatshrink_encoder.c ****         case HSES_SEARCH:
 1889              		.loc 1 217 13 is_stmt 1 view .LVU539
 1890              	.L108:
 245:Core/Src/heatshrink_encoder.c ****             /* Check if output buffer is exhausted. */
 1891              		.loc 1 245 9 view .LVU540
 245:Core/Src/heatshrink_encoder.c ****             /* Check if output buffer is exhausted. */
 1892              		.loc 1 245 16 is_stmt 0 view .LVU541
 1893 0036 237B     		ldrb	r3, [r4, #12]
 245:Core/Src/heatshrink_encoder.c ****             /* Check if output buffer is exhausted. */
 1894              		.loc 1 245 12 view .LVU542
 1895 0038 AB42     		cmp	r3, r5
 1896 003a 2FD0     		beq	.L115
 1897              	.LVL203:
 1898              	.L109:
 245:Core/Src/heatshrink_encoder.c ****             /* Check if output buffer is exhausted. */
 1899              		.loc 1 245 12 view .LVU543
 1900              	.LBE11:
 206:Core/Src/heatshrink_encoder.c ****         LOG("-- polling, state %u (%s), flags 0x%02x\n",
 1901              		.loc 1 206 5 is_stmt 1 view .LVU544
 1902              	.LBB12:
 208:Core/Src/heatshrink_encoder.c **** 
 1903              		.loc 1 208 61 view .LVU545
 210:Core/Src/heatshrink_encoder.c ****         switch (in_state) {
 1904              		.loc 1 210 9 view .LVU546
 210:Core/Src/heatshrink_encoder.c ****         switch (in_state) {
 1905              		.loc 1 210 17 is_stmt 0 view .LVU547
 1906 003c 257B     		ldrb	r5, [r4, #12]
 1907              	.LVL204:
 211:Core/Src/heatshrink_encoder.c ****         case HSES_NOT_FULL:
 1908              		.loc 1 211 9 is_stmt 1 view .LVU548
 1909 003e 092D     		cmp	r5, #9
 1910 0040 3DD8     		bhi	.L114
 1911 0042 A900     		lsls	r1, r5, #2
 1912 0044 1F4B     		ldr	r3, .L116
 1913 0046 5B58     		ldr	r3, [r3, r1]
 1914 0048 9F46     		mov	pc, r3
 1915              		.section	.rodata.heatshrink_encoder_poll,"a",%progbits
 1916              		.align	2
 1917              	.L99:
 1918 0000 26000000 		.word	.L98
 1919 0004 2C000000 		.word	.L107
 1920 0008 4A000000 		.word	.L106
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 52


 1921 000c 54000000 		.word	.L105
 1922 0010 60000000 		.word	.L104
 1923 0014 6C000000 		.word	.L103
 1924 0018 78000000 		.word	.L102
 1925 001c 84000000 		.word	.L101
 1926 0020 8E000000 		.word	.L100
 1927 0024 26000000 		.word	.L98
 1928              		.section	.text.heatshrink_encoder_poll
 1929              	.L106:
 219:Core/Src/heatshrink_encoder.c ****             break;
 1930              		.loc 1 219 13 view .LVU549
 219:Core/Src/heatshrink_encoder.c ****             break;
 1931              		.loc 1 219 26 is_stmt 0 view .LVU550
 1932 004a 2000     		movs	r0, r4
 1933 004c FFF7FEFF 		bl	st_step_search
 1934              	.LVL205:
 219:Core/Src/heatshrink_encoder.c ****             break;
 1935              		.loc 1 219 24 view .LVU551
 1936 0050 2073     		strb	r0, [r4, #12]
 220:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_TAG_BIT:
 1937              		.loc 1 220 13 is_stmt 1 view .LVU552
 1938 0052 F0E7     		b	.L108
 1939              	.L105:
 222:Core/Src/heatshrink_encoder.c ****             break;
 1940              		.loc 1 222 13 view .LVU553
 222:Core/Src/heatshrink_encoder.c ****             break;
 1941              		.loc 1 222 26 is_stmt 0 view .LVU554
 1942 0054 01A9     		add	r1, sp, #4
 1943 0056 2000     		movs	r0, r4
 1944 0058 FFF7FEFF 		bl	st_yield_tag_bit
 1945              	.LVL206:
 222:Core/Src/heatshrink_encoder.c ****             break;
 1946              		.loc 1 222 24 view .LVU555
 1947 005c 2073     		strb	r0, [r4, #12]
 223:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_LITERAL:
 1948              		.loc 1 223 13 is_stmt 1 view .LVU556
 1949 005e EAE7     		b	.L108
 1950              	.L104:
 225:Core/Src/heatshrink_encoder.c ****             break;
 1951              		.loc 1 225 13 view .LVU557
 225:Core/Src/heatshrink_encoder.c ****             break;
 1952              		.loc 1 225 26 is_stmt 0 view .LVU558
 1953 0060 01A9     		add	r1, sp, #4
 1954 0062 2000     		movs	r0, r4
 1955 0064 FFF7FEFF 		bl	st_yield_literal
 1956              	.LVL207:
 225:Core/Src/heatshrink_encoder.c ****             break;
 1957              		.loc 1 225 24 view .LVU559
 1958 0068 2073     		strb	r0, [r4, #12]
 226:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_BR_INDEX:
 1959              		.loc 1 226 13 is_stmt 1 view .LVU560
 1960 006a E4E7     		b	.L108
 1961              	.L103:
 228:Core/Src/heatshrink_encoder.c ****             break;
 1962              		.loc 1 228 13 view .LVU561
 228:Core/Src/heatshrink_encoder.c ****             break;
 1963              		.loc 1 228 26 is_stmt 0 view .LVU562
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 53


 1964 006c 01A9     		add	r1, sp, #4
 1965 006e 2000     		movs	r0, r4
 1966 0070 FFF7FEFF 		bl	st_yield_br_index
 1967              	.LVL208:
 228:Core/Src/heatshrink_encoder.c ****             break;
 1968              		.loc 1 228 24 view .LVU563
 1969 0074 2073     		strb	r0, [r4, #12]
 229:Core/Src/heatshrink_encoder.c ****         case HSES_YIELD_BR_LENGTH:
 1970              		.loc 1 229 13 is_stmt 1 view .LVU564
 1971 0076 DEE7     		b	.L108
 1972              	.L102:
 231:Core/Src/heatshrink_encoder.c ****             break;
 1973              		.loc 1 231 13 view .LVU565
 231:Core/Src/heatshrink_encoder.c ****             break;
 1974              		.loc 1 231 26 is_stmt 0 view .LVU566
 1975 0078 01A9     		add	r1, sp, #4
 1976 007a 2000     		movs	r0, r4
 1977 007c FFF7FEFF 		bl	st_yield_br_length
 1978              	.LVL209:
 231:Core/Src/heatshrink_encoder.c ****             break;
 1979              		.loc 1 231 24 view .LVU567
 1980 0080 2073     		strb	r0, [r4, #12]
 232:Core/Src/heatshrink_encoder.c ****         case HSES_SAVE_BACKLOG:
 1981              		.loc 1 232 13 is_stmt 1 view .LVU568
 1982 0082 D8E7     		b	.L108
 1983              	.L101:
 234:Core/Src/heatshrink_encoder.c ****             break;
 1984              		.loc 1 234 13 view .LVU569
 234:Core/Src/heatshrink_encoder.c ****             break;
 1985              		.loc 1 234 26 is_stmt 0 view .LVU570
 1986 0084 2000     		movs	r0, r4
 1987 0086 FFF7FEFF 		bl	st_save_backlog
 1988              	.LVL210:
 234:Core/Src/heatshrink_encoder.c ****             break;
 1989              		.loc 1 234 24 view .LVU571
 1990 008a 2073     		strb	r0, [r4, #12]
 235:Core/Src/heatshrink_encoder.c ****         case HSES_FLUSH_BITS:
 1991              		.loc 1 235 13 is_stmt 1 view .LVU572
 1992 008c D3E7     		b	.L108
 1993              	.L100:
 237:Core/Src/heatshrink_encoder.c ****         case HSES_DONE:
 1994              		.loc 1 237 13 view .LVU573
 237:Core/Src/heatshrink_encoder.c ****         case HSES_DONE:
 1995              		.loc 1 237 26 is_stmt 0 view .LVU574
 1996 008e 01A9     		add	r1, sp, #4
 1997 0090 2000     		movs	r0, r4
 1998 0092 FFF7FEFF 		bl	st_flush_bit_buffer
 1999              	.LVL211:
 237:Core/Src/heatshrink_encoder.c ****         case HSES_DONE:
 2000              		.loc 1 237 24 view .LVU575
 2001 0096 2073     		strb	r0, [r4, #12]
 239:Core/Src/heatshrink_encoder.c ****         default:
 2002              		.loc 1 239 20 view .LVU576
 2003 0098 0020     		movs	r0, #0
 2004 009a C5E7     		b	.L97
 2005              	.L115:
 247:Core/Src/heatshrink_encoder.c ****         }
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 54


 2006              		.loc 1 247 13 is_stmt 1 view .LVU577
 247:Core/Src/heatshrink_encoder.c ****         }
 2007              		.loc 1 247 16 is_stmt 0 view .LVU578
 2008 009c 3368     		ldr	r3, [r6]
 2009 009e BB42     		cmp	r3, r7
 2010 00a0 CCD1     		bne	.L109
 247:Core/Src/heatshrink_encoder.c ****         }
 2011              		.loc 1 247 54 view .LVU579
 2012 00a2 0120     		movs	r0, #1
 2013 00a4 C0E7     		b	.L97
 2014              	.LVL212:
 2015              	.L110:
 247:Core/Src/heatshrink_encoder.c ****         }
 2016              		.loc 1 247 54 view .LVU580
 2017              	.LBE12:
 193:Core/Src/heatshrink_encoder.c ****     }
 2018              		.loc 1 193 16 view .LVU581
 2019 00a6 0120     		movs	r0, #1
 2020              	.LVL213:
 193:Core/Src/heatshrink_encoder.c ****     }
 2021              		.loc 1 193 16 view .LVU582
 2022 00a8 4042     		rsbs	r0, r0, #0
 2023 00aa BDE7     		b	.L97
 2024              	.LVL214:
 2025              	.L111:
 193:Core/Src/heatshrink_encoder.c ****     }
 2026              		.loc 1 193 16 view .LVU583
 2027 00ac 0120     		movs	r0, #1
 2028              	.LVL215:
 193:Core/Src/heatshrink_encoder.c ****     }
 2029              		.loc 1 193 16 view .LVU584
 2030 00ae 4042     		rsbs	r0, r0, #0
 2031 00b0 BAE7     		b	.L97
 2032              	.LVL216:
 2033              	.L112:
 193:Core/Src/heatshrink_encoder.c ****     }
 2034              		.loc 1 193 16 view .LVU585
 2035 00b2 0120     		movs	r0, #1
 2036              	.LVL217:
 193:Core/Src/heatshrink_encoder.c ****     }
 2037              		.loc 1 193 16 view .LVU586
 2038 00b4 4042     		rsbs	r0, r0, #0
 2039 00b6 B7E7     		b	.L97
 2040              	.LVL218:
 2041              	.L113:
 197:Core/Src/heatshrink_encoder.c ****     }
 2042              		.loc 1 197 16 view .LVU587
 2043 00b8 0220     		movs	r0, #2
 2044              	.LVL219:
 197:Core/Src/heatshrink_encoder.c ****     }
 2045              		.loc 1 197 16 view .LVU588
 2046 00ba 4042     		rsbs	r0, r0, #0
 2047 00bc B4E7     		b	.L97
 2048              	.LVL220:
 2049              	.L114:
 2050              	.LBB13:
 242:Core/Src/heatshrink_encoder.c ****         }
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 55


 2051              		.loc 1 242 20 view .LVU589
 2052 00be 0220     		movs	r0, #2
 2053 00c0 4042     		rsbs	r0, r0, #0
 2054 00c2 B1E7     		b	.L97
 2055              	.L117:
 2056              		.align	2
 2057              	.L116:
 2058 00c4 00000000 		.word	.L99
 2059              	.LBE13:
 2060              		.cfi_endproc
 2061              	.LFE2:
 2063              		.section	.text.heatshrink_encoder_finish,"ax",%progbits
 2064              		.align	1
 2065              		.global	heatshrink_encoder_finish
 2066              		.syntax unified
 2067              		.code	16
 2068              		.thumb_func
 2069              		.fpu softvfp
 2071              	heatshrink_encoder_finish:
 2072              	.LVL221:
 2073              	.LFB3:
 252:Core/Src/heatshrink_encoder.c ****     if (hse == NULL) { return HSER_FINISH_ERROR_NULL; }
 2074              		.loc 1 252 67 is_stmt 1 view -0
 2075              		.cfi_startproc
 2076              		@ args = 0, pretend = 0, frame = 0
 2077              		@ frame_needed = 0, uses_anonymous_args = 0
 2078              		@ link register save eliminated.
 253:Core/Src/heatshrink_encoder.c ****     LOG("-- setting is_finishing flag\n");
 2079              		.loc 1 253 5 view .LVU591
 253:Core/Src/heatshrink_encoder.c ****     LOG("-- setting is_finishing flag\n");
 2080              		.loc 1 253 8 is_stmt 0 view .LVU592
 2081 0000 0028     		cmp	r0, #0
 2082 0002 0ED0     		beq	.L121
 254:Core/Src/heatshrink_encoder.c ****     hse->flags |= FLAG_IS_FINISHING;
 2083              		.loc 1 254 42 is_stmt 1 view .LVU593
 255:Core/Src/heatshrink_encoder.c ****     if (hse->state == HSES_NOT_FULL) { hse->state = HSES_FILLED; }
 2084              		.loc 1 255 5 view .LVU594
 255:Core/Src/heatshrink_encoder.c ****     if (hse->state == HSES_NOT_FULL) { hse->state = HSES_FILLED; }
 2085              		.loc 1 255 16 is_stmt 0 view .LVU595
 2086 0004 C37A     		ldrb	r3, [r0, #11]
 2087 0006 0122     		movs	r2, #1
 2088 0008 1343     		orrs	r3, r2
 2089 000a C372     		strb	r3, [r0, #11]
 256:Core/Src/heatshrink_encoder.c ****     return hse->state == HSES_DONE ? HSER_FINISH_DONE : HSER_FINISH_MORE;
 2090              		.loc 1 256 5 is_stmt 1 view .LVU596
 256:Core/Src/heatshrink_encoder.c ****     return hse->state == HSES_DONE ? HSER_FINISH_DONE : HSER_FINISH_MORE;
 2091              		.loc 1 256 12 is_stmt 0 view .LVU597
 2092 000c 037B     		ldrb	r3, [r0, #12]
 256:Core/Src/heatshrink_encoder.c ****     return hse->state == HSES_DONE ? HSER_FINISH_DONE : HSER_FINISH_MORE;
 2093              		.loc 1 256 8 view .LVU598
 2094 000e 002B     		cmp	r3, #0
 2095 0010 01D1     		bne	.L120
 256:Core/Src/heatshrink_encoder.c ****     return hse->state == HSES_DONE ? HSER_FINISH_DONE : HSER_FINISH_MORE;
 2096              		.loc 1 256 40 is_stmt 1 discriminator 1 view .LVU599
 256:Core/Src/heatshrink_encoder.c ****     return hse->state == HSES_DONE ? HSER_FINISH_DONE : HSER_FINISH_MORE;
 2097              		.loc 1 256 51 is_stmt 0 discriminator 1 view .LVU600
 2098 0012 0133     		adds	r3, r3, #1
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 56


 2099 0014 0373     		strb	r3, [r0, #12]
 2100              	.L120:
 257:Core/Src/heatshrink_encoder.c **** }
 2101              		.loc 1 257 5 is_stmt 1 view .LVU601
 257:Core/Src/heatshrink_encoder.c **** }
 2102              		.loc 1 257 15 is_stmt 0 view .LVU602
 2103 0016 007B     		ldrb	r0, [r0, #12]
 2104              	.LVL222:
 257:Core/Src/heatshrink_encoder.c **** }
 2105              		.loc 1 257 55 view .LVU603
 2106 0018 0938     		subs	r0, r0, #9
 2107 001a 431E     		subs	r3, r0, #1
 2108 001c 9841     		sbcs	r0, r0, r3
 2109 001e 40B2     		sxtb	r0, r0
 2110              	.L119:
 258:Core/Src/heatshrink_encoder.c **** 
 2111              		.loc 1 258 1 view .LVU604
 2112              		@ sp needed
 2113 0020 7047     		bx	lr
 2114              	.LVL223:
 2115              	.L121:
 253:Core/Src/heatshrink_encoder.c ****     LOG("-- setting is_finishing flag\n");
 2116              		.loc 1 253 31 view .LVU605
 2117 0022 0120     		movs	r0, #1
 2118              	.LVL224:
 253:Core/Src/heatshrink_encoder.c ****     LOG("-- setting is_finishing flag\n");
 2119              		.loc 1 253 31 view .LVU606
 2120 0024 4042     		rsbs	r0, r0, #0
 2121 0026 FBE7     		b	.L119
 2122              		.cfi_endproc
 2123              	.LFE3:
 2125              		.text
 2126              	.Letext0:
 2127              		.file 2 "/usr/local/Cellar/arm-gcc-bin@10/10-2020-q4-major/lib/gcc/arm-none-eabi/10.2.1/include/st
 2128              		.file 3 "/usr/local/Cellar/arm-gcc-bin@10/10-2020-q4-major/arm-none-eabi/include/machine/_default_
 2129              		.file 4 "/usr/local/Cellar/arm-gcc-bin@10/10-2020-q4-major/arm-none-eabi/include/sys/_stdint.h"
 2130              		.file 5 "Core/Inc/heatshrink_encoder.h"
 2131              		.file 6 "/usr/local/Cellar/arm-gcc-bin@10/10-2020-q4-major/arm-none-eabi/include/string.h"
 2132              		.file 7 "<built-in>"
ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 57


DEFINED SYMBOLS
                            *ABS*:0000000000000000 heatshrink_encoder.c
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:16     .text.get_input_buffer_size:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:23     .text.get_input_buffer_size:0000000000000000 get_input_buffer_size
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:45     .text.get_input_offset:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:51     .text.get_input_offset:0000000000000000 get_input_offset
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:74     .text.get_lookahead_size:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:80     .text.get_lookahead_size:0000000000000000 get_lookahead_size
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:100    .text.is_finishing:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:106    .text.is_finishing:0000000000000000 is_finishing
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:129    .text.can_take_byte:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:135    .text.can_take_byte:0000000000000000 can_take_byte
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:162    .text.st_flush_bit_buffer:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:168    .text.st_flush_bit_buffer:0000000000000000 st_flush_bit_buffer
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:242    .text.find_longest_match:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:248    .text.find_longest_match:0000000000000000 find_longest_match
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:475    .text.find_longest_match:00000000000000b0 $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:481    .text.st_step_search:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:487    .text.st_step_search:0000000000000000 st_step_search
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:670    .text.st_step_search:000000000000009c $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:675    .text.push_bits:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:681    .text.push_bits:0000000000000000 push_bits
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:812    .text.add_tag_bit:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:818    .text.add_tag_bit:0000000000000000 add_tag_bit
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:845    .text.st_yield_tag_bit:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:851    .text.st_yield_tag_bit:0000000000000000 st_yield_tag_bit
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:929    .text.push_outgoing_bits:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:935    .text.push_outgoing_bits:0000000000000000 push_outgoing_bits
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1016   .text.st_yield_br_index:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1022   .text.st_yield_br_index:0000000000000000 st_yield_br_index
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1092   .text.st_yield_br_length:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1098   .text.st_yield_br_length:0000000000000000 st_yield_br_length
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1168   .text.push_literal_byte:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1174   .text.push_literal_byte:0000000000000000 push_literal_byte
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1234   .text.push_literal_byte:000000000000002c $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1239   .text.st_yield_literal:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1245   .text.st_yield_literal:0000000000000000 st_yield_literal
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1295   .text.do_indexing:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1301   .text.do_indexing:0000000000000000 do_indexing
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1416   .text.do_indexing:000000000000004c $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1422   .text.save_backlog:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1428   .text.save_backlog:0000000000000000 save_backlog
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1504   .text.save_backlog:0000000000000038 $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1509   .text.st_save_backlog:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1515   .text.st_save_backlog:0000000000000000 st_save_backlog
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1540   .text.heatshrink_encoder_reset:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1547   .text.heatshrink_encoder_reset:0000000000000000 heatshrink_encoder_reset
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1611   .text.heatshrink_encoder_reset:000000000000002c $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1616   .text.heatshrink_encoder_sink:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1623   .text.heatshrink_encoder_sink:0000000000000000 heatshrink_encoder_sink
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1803   .text.heatshrink_encoder_poll:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1810   .text.heatshrink_encoder_poll:0000000000000000 heatshrink_encoder_poll
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:1916   .rodata.heatshrink_encoder_poll:0000000000000000 $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:2058   .text.heatshrink_encoder_poll:00000000000000c4 $d
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:2064   .text.heatshrink_encoder_finish:0000000000000000 $t
/var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s:2071   .text.heatshrink_encoder_finish:0000000000000000 heatshrink_encoder_finish

ARM GAS  /var/folders/b6/0xn3z77n589c481l0rsth7mc0000gn/T//ccX4tm9x.s 			page 58


UNDEFINED SYMBOLS
memset
memmove
memcpy
